{"version":3,"file":"devskin.umd.min.js","sources":["../src/collectors/device.ts","../node_modules/tslib/tslib.es6.js","../src/collectors/location.ts","../src/collectors/browser.ts","../node_modules/web-vitals/dist/web-vitals.js","../node_modules/rrweb/es/rrweb/packages/rrweb-snapshot/es/rrweb-snapshot.js","../src/collectors/performance.ts","../src/collectors/error.ts","../src/collectors/network.ts","../src/collectors/heatmap.ts","../node_modules/rrweb/es/rrweb/packages/rrweb/src/utils.js","../node_modules/rrweb/es/rrweb/packages/types/dist/types.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/mutation.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observer.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/cross-origin-iframe-mirror.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/iframe-manager.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/shadow-dom-manager.js","../node_modules/rrweb/es/rrweb/ext/tslib/tslib.es6.js","../node_modules/rrweb/es/rrweb/ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/serialize-args.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/webgl.js","../node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__node__WorkerClass.js","../node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__node__createBase64WorkerFactory.js","../node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js","../node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__auto__isNodeJS.js","../node_modules/rrweb/es/rrweb/_virtual/image-bitmap-data-url-worker.js","../node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__auto__createBase64WorkerFactory.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas-manager.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/2d.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/stylesheet-manager.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/index.js","../src/recorder/rrweb.ts","../src/transport.ts","../src/index.ts"],"sourcesContent":[null,"/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n",null,null,"var e,n,t,i,r,a=-1,o=function(e){addEventListener(\"pageshow\",(function(n){n.persisted&&(a=n.timeStamp,e(n))}),!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0]},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),i=\"navigate\";a>=0?i=\"back-forward-cache\":t&&(document.prerendering||u()>0?i=\"prerender\":document.wasDiscarded?i=\"restore\":t.type&&(i=t.type.replace(/_/g,\"-\")));return{name:e,value:void 0===n?-1:n,rating:\"good\",delta:0,entries:[],id:\"v3-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){n(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},t||{})),i}}catch(e){}},d=function(e,n,t,i){var r,a;return function(o){n.value>=0&&(o||i)&&((a=n.value-(r||0))||void 0===r)&&(r=n.value,n.delta=a,n.rating=function(e,n){return e>n[1]?\"poor\":e>n[0]?\"needs-improvement\":\"good\"}(n.value,t),e(n))}},l=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},p=function(e){var n=function(n){\"pagehide\"!==n.type&&\"hidden\"!==document.visibilityState||e(n)};addEventListener(\"visibilitychange\",n,!0),addEventListener(\"pagehide\",n,!0)},v=function(e){var n=!1;return function(t){n||(e(t),n=!0)}},m=-1,h=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},g=function(e){\"hidden\"===document.visibilityState&&m>-1&&(m=\"visibilitychange\"===e.type?e.timeStamp:0,T())},y=function(){addEventListener(\"visibilitychange\",g,!0),addEventListener(\"prerenderingchange\",g,!0)},T=function(){removeEventListener(\"visibilitychange\",g,!0),removeEventListener(\"prerenderingchange\",g,!0)},E=function(){return m<0&&(m=h(),y(),o((function(){setTimeout((function(){m=h(),y()}),0)}))),{get firstHiddenTime(){return m}}},C=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},L=[1800,3e3],w=function(e,n){n=n||{},C((function(){var t,i=E(),r=f(\"FCP\"),a=s(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-u(),0),r.entries.push(e),t(!0)))}))}));a&&(t=d(e,r,L,n.reportAllChanges),o((function(i){r=f(\"FCP\"),t=d(e,r,L,n.reportAllChanges),l((function(){r.value=performance.now()-i.timeStamp,t(!0)}))})))}))},b=[.1,.25],S=function(e,n){n=n||{},w(v((function(){var t,i=f(\"CLS\",0),r=0,a=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=a[0],t=a[a.length-1];r&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(r+=e.value,a.push(e)):(r=e.value,a=[e])}})),r>i.value&&(i.value=r,i.entries=a,t())},u=s(\"layout-shift\",c);u&&(t=d(e,i,b,n.reportAllChanges),p((function(){c(u.takeRecords()),t(!0)})),o((function(){r=0,i=f(\"CLS\",0),t=d(e,i,b,n.reportAllChanges),l((function(){return t()}))})),setTimeout(t,0))})))},A={passive:!0,capture:!0},I=new Date,P=function(i,r){e||(e=r,n=i,t=new Date,k(removeEventListener),F())},F=function(){if(n>=0&&n<t-I){var r={entryType:\"first-input\",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+n};i.forEach((function(e){e(r)})),i=[]}},M=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,n){var t=function(){P(e,n),r()},i=function(){r()},r=function(){removeEventListener(\"pointerup\",t,A),removeEventListener(\"pointercancel\",i,A)};addEventListener(\"pointerup\",t,A),addEventListener(\"pointercancel\",i,A)}(n,e):P(n,e)}},k=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(n){return e(n,M,A)}))},D=[100,300],x=function(t,r){r=r||{},C((function(){var a,c=E(),u=f(\"FID\"),l=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),a(!0))},m=function(e){e.forEach(l)},h=s(\"first-input\",m);a=d(t,u,D,r.reportAllChanges),h&&p(v((function(){m(h.takeRecords()),h.disconnect()}))),h&&o((function(){var o;u=f(\"FID\"),a=d(t,u,D,r.reportAllChanges),i=[],n=-1,e=null,k(addEventListener),o=l,i.push(o),F()}))}))},B=0,R=1/0,H=0,N=function(e){e.forEach((function(e){e.interactionId&&(R=Math.min(R,e.interactionId),H=Math.max(H,e.interactionId),B=H?(H-R)/7+1:0)}))},O=function(){return r?B:performance.interactionCount||0},q=function(){\"interactionCount\"in performance||r||(r=s(\"event\",N,{type:\"event\",buffered:!0,durationThreshold:0}))},j=[200,500],_=0,z=function(){return O()-_},G=[],J={},K=function(e){var n=G[G.length-1],t=J[e.interactionId];if(t||G.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};J[i.id]=i,G.push(i)}G.sort((function(e,n){return n.latency-e.latency})),G.splice(10).forEach((function(e){delete J[e.id]}))}},Q=function(e,n){n=n||{},C((function(){var t;q();var i,r=f(\"INP\"),a=function(e){e.forEach((function(e){(e.interactionId&&K(e),\"first-input\"===e.entryType)&&(!G.some((function(n){return n.entries.some((function(n){return e.duration===n.duration&&e.startTime===n.startTime}))}))&&K(e))}));var n,t=(n=Math.min(G.length-1,Math.floor(z()/50)),G[n]);t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())},c=s(\"event\",a,{durationThreshold:null!==(t=n.durationThreshold)&&void 0!==t?t:40});i=d(e,r,j,n.reportAllChanges),c&&(\"PerformanceEventTiming\"in window&&\"interactionId\"in PerformanceEventTiming.prototype&&c.observe({type:\"first-input\",buffered:!0}),p((function(){a(c.takeRecords()),r.value<0&&z()>0&&(r.value=0,r.entries=[]),i(!0)})),o((function(){G=[],_=O(),r=f(\"INP\"),i=d(e,r,j,n.reportAllChanges)})))}))},U=[2500,4e3],V={},W=function(e,n){n=n||{},C((function(){var t,i=E(),r=f(\"LCP\"),a=function(e){var n=e[e.length-1];n&&n.startTime<i.firstHiddenTime&&(r.value=Math.max(n.startTime-u(),0),r.entries=[n],t())},c=s(\"largest-contentful-paint\",a);if(c){t=d(e,r,U,n.reportAllChanges);var m=v((function(){V[r.id]||(a(c.takeRecords()),c.disconnect(),V[r.id]=!0,t(!0))}));[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,(function(){return setTimeout(m,0)}),!0)})),p(m),o((function(i){r=f(\"LCP\"),t=d(e,r,U,n.reportAllChanges),l((function(){r.value=performance.now()-i.timeStamp,V[r.id]=!0,t(!0)}))}))}}))},X=[800,1800],Y=function e(n){document.prerendering?C((function(){return e(n)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(n)}),!0):setTimeout(n,0)},Z=function(e,n){n=n||{};var t=f(\"TTFB\"),i=d(e,t,X,n.reportAllChanges);Y((function(){var r=c();if(r){var a=r.responseStart;if(a<=0||a>performance.now())return;t.value=Math.max(a-u(),0),t.entries=[r],i(!0),o((function(){t=f(\"TTFB\",0),(i=d(e,t,X,n.reportAllChanges))(!0)}))}}))};export{b as CLSThresholds,L as FCPThresholds,D as FIDThresholds,j as INPThresholds,U as LCPThresholds,X as TTFBThresholds,S as getCLS,w as getFCP,x as getFID,Q as getINP,W as getLCP,Z as getTTFB,S as onCLS,w as onFCP,x as onFID,Q as onINP,W as onLCP,Z as onTTFB};\n","var NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType || (NodeType = {}));\n\nfunction isElement(n) {\r\n    return n.nodeType === n.ELEMENT_NODE;\r\n}\r\nfunction isShadowRoot(n) {\r\n    var host = n === null || n === void 0 ? void 0 : n.host;\r\n    return Boolean((host === null || host === void 0 ? void 0 : host.shadowRoot) === n);\r\n}\r\nfunction isNativeShadowDom(shadowRoot) {\r\n    return Object.prototype.toString.call(shadowRoot) === '[object ShadowRoot]';\r\n}\r\nfunction fixBrowserCompatibilityIssuesInCSS(cssText) {\r\n    if (cssText.includes(' background-clip: text;') &&\r\n        !cssText.includes(' -webkit-background-clip: text;')) {\r\n        cssText = cssText.replace(' background-clip: text;', ' -webkit-background-clip: text; background-clip: text;');\r\n    }\r\n    return cssText;\r\n}\r\nfunction getCssRulesString(s) {\r\n    try {\r\n        var rules = s.rules || s.cssRules;\r\n        return rules\r\n            ? fixBrowserCompatibilityIssuesInCSS(Array.from(rules).map(getCssRuleString).join(''))\r\n            : null;\r\n    }\r\n    catch (error) {\r\n        return null;\r\n    }\r\n}\r\nfunction getCssRuleString(rule) {\r\n    var cssStringified = rule.cssText;\r\n    if (isCSSImportRule(rule)) {\r\n        try {\r\n            cssStringified = getCssRulesString(rule.styleSheet) || cssStringified;\r\n        }\r\n        catch (_a) {\r\n        }\r\n    }\r\n    return cssStringified;\r\n}\r\nfunction isCSSImportRule(rule) {\r\n    return 'styleSheet' in rule;\r\n}\r\nvar Mirror = (function () {\r\n    function Mirror() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    Mirror.prototype.getId = function (n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        var id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    };\r\n    Mirror.prototype.getNode = function (id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    };\r\n    Mirror.prototype.getIds = function () {\r\n        return Array.from(this.idNodeMap.keys());\r\n    };\r\n    Mirror.prototype.getMeta = function (n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    };\r\n    Mirror.prototype.removeNodeFromMap = function (n) {\r\n        var _this = this;\r\n        var id = this.getId(n);\r\n        this.idNodeMap[\"delete\"](id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach(function (childNode) {\r\n                return _this.removeNodeFromMap(childNode);\r\n            });\r\n        }\r\n    };\r\n    Mirror.prototype.has = function (id) {\r\n        return this.idNodeMap.has(id);\r\n    };\r\n    Mirror.prototype.hasNode = function (node) {\r\n        return this.nodeMetaMap.has(node);\r\n    };\r\n    Mirror.prototype.add = function (n, meta) {\r\n        var id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    };\r\n    Mirror.prototype.replace = function (id, n) {\r\n        var oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            var meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    };\r\n    Mirror.prototype.reset = function () {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    };\r\n    return Mirror;\r\n}());\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nfunction maskInputValue(_a) {\r\n    var maskInputOptions = _a.maskInputOptions, tagName = _a.tagName, type = _a.type, value = _a.value, maskInputFn = _a.maskInputFn;\r\n    var text = value || '';\r\n    if (maskInputOptions[tagName.toLowerCase()] ||\r\n        maskInputOptions[type]) {\r\n        if (maskInputFn) {\r\n            text = maskInputFn(text);\r\n        }\r\n        else {\r\n            text = '*'.repeat(text.length);\r\n        }\r\n    }\r\n    return text;\r\n}\r\nvar ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\r\nfunction is2DCanvasBlank(canvas) {\r\n    var ctx = canvas.getContext('2d');\r\n    if (!ctx)\r\n        return true;\r\n    var chunkSize = 50;\r\n    for (var x = 0; x < canvas.width; x += chunkSize) {\r\n        for (var y = 0; y < canvas.height; y += chunkSize) {\r\n            var getImageData = ctx.getImageData;\r\n            var originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData\r\n                ? getImageData[ORIGINAL_ATTRIBUTE_NAME]\r\n                : getImageData;\r\n            var pixelBuffer = new Uint32Array(originalGetImageData.call(ctx, x, y, Math.min(chunkSize, canvas.width - x), Math.min(chunkSize, canvas.height - y)).data.buffer);\r\n            if (pixelBuffer.some(function (pixel) { return pixel !== 0; }))\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\nvar _id = 1;\r\nvar tagNameRegex = new RegExp('[^a-z0-9-_:]');\r\nvar IGNORED_NODE = -2;\r\nfunction genId() {\r\n    return _id++;\r\n}\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'form';\r\n    }\r\n    var processedTagName = element.tagName.toLowerCase().trim();\r\n    if (tagNameRegex.test(processedTagName)) {\r\n        return 'div';\r\n    }\r\n    return processedTagName;\r\n}\r\nfunction stringifyStyleSheet(sheet) {\r\n    return sheet.cssRules\r\n        ? Array.from(sheet.cssRules)\r\n            .map(function (rule) { return rule.cssText || ''; })\r\n            .join('')\r\n        : '';\r\n}\r\nfunction extractOrigin(url) {\r\n    var origin = '';\r\n    if (url.indexOf('//') > -1) {\r\n        origin = url.split('/').slice(0, 3).join('/');\r\n    }\r\n    else {\r\n        origin = url.split('/')[0];\r\n    }\r\n    origin = origin.split('?')[0];\r\n    return origin;\r\n}\r\nvar canvasService;\r\nvar canvasCtx;\r\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\r\nvar RELATIVE_PATH = /^(?!www\\.|(?:http|ftp)s?:\\/\\/|[A-Za-z]:\\\\|\\/\\/|#).*/;\r\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\r\nfunction absoluteToStylesheet(cssText, href) {\r\n    return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\r\n        var filePath = path1 || path2 || path3;\r\n        var maybeQuote = quote1 || quote2 || '';\r\n        if (!filePath) {\r\n            return origin;\r\n        }\r\n        if (!RELATIVE_PATH.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (DATA_URI.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (filePath[0] === '/') {\r\n            return \"url(\".concat(maybeQuote).concat(extractOrigin(href) + filePath).concat(maybeQuote, \")\");\r\n        }\r\n        var stack = href.split('/');\r\n        var parts = filePath.split('/');\r\n        stack.pop();\r\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n            var part = parts_1[_i];\r\n            if (part === '.') {\r\n                continue;\r\n            }\r\n            else if (part === '..') {\r\n                stack.pop();\r\n            }\r\n            else {\r\n                stack.push(part);\r\n            }\r\n        }\r\n        return \"url(\".concat(maybeQuote).concat(stack.join('/')).concat(maybeQuote, \")\");\r\n    });\r\n}\r\nvar SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\r\nvar SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\r\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\r\n    if (attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var pos = 0;\r\n    function collectCharacters(regEx) {\r\n        var chars;\r\n        var match = regEx.exec(attributeValue.substring(pos));\r\n        if (match) {\r\n            chars = match[0];\r\n            pos += chars.length;\r\n            return chars;\r\n        }\r\n        return '';\r\n    }\r\n    var output = [];\r\n    while (true) {\r\n        collectCharacters(SRCSET_COMMAS_OR_SPACES);\r\n        if (pos >= attributeValue.length) {\r\n            break;\r\n        }\r\n        var url = collectCharacters(SRCSET_NOT_SPACES);\r\n        if (url.slice(-1) === ',') {\r\n            url = absoluteToDoc(doc, url.substring(0, url.length - 1));\r\n            output.push(url);\r\n        }\r\n        else {\r\n            var descriptorsStr = '';\r\n            url = absoluteToDoc(doc, url);\r\n            var inParens = false;\r\n            while (true) {\r\n                var c = attributeValue.charAt(pos);\r\n                if (c === '') {\r\n                    output.push((url + descriptorsStr).trim());\r\n                    break;\r\n                }\r\n                else if (!inParens) {\r\n                    if (c === ',') {\r\n                        pos += 1;\r\n                        output.push((url + descriptorsStr).trim());\r\n                        break;\r\n                    }\r\n                    else if (c === '(') {\r\n                        inParens = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (c === ')') {\r\n                        inParens = false;\r\n                    }\r\n                }\r\n                descriptorsStr += c;\r\n                pos += 1;\r\n            }\r\n        }\r\n    }\r\n    return output.join(', ');\r\n}\r\nfunction absoluteToDoc(doc, attributeValue) {\r\n    if (!attributeValue || attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var a = doc.createElement('a');\r\n    a.href = attributeValue;\r\n    return a.href;\r\n}\r\nfunction isSVGElement(el) {\r\n    return Boolean(el.tagName === 'svg' || el.ownerSVGElement);\r\n}\r\nfunction getHref() {\r\n    var a = document.createElement('a');\r\n    a.href = '';\r\n    return a.href;\r\n}\r\nfunction transformAttribute(doc, tagName, name, value) {\r\n    if (name === 'src' ||\r\n        (name === 'href' && value && !(tagName === 'use' && value[0] === '#'))) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'xlink:href' && value && value[0] !== '#') {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'background' &&\r\n        value &&\r\n        (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'srcset' && value) {\r\n        return getAbsoluteSrcsetString(doc, value);\r\n    }\r\n    else if (name === 'style' && value) {\r\n        return absoluteToStylesheet(value, getHref());\r\n    }\r\n    else if (tagName === 'object' && name === 'data' && value) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nfunction _isBlockedElement(element, blockClass, blockSelector) {\r\n    if (typeof blockClass === 'string') {\r\n        if (element.classList.contains(blockClass)) {\r\n            return true;\r\n        }\r\n    }\r\n    else {\r\n        for (var eIndex = element.classList.length; eIndex--;) {\r\n            var className = element.classList[eIndex];\r\n            if (blockClass.test(className)) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    if (blockSelector) {\r\n        return element.matches(blockSelector);\r\n    }\r\n    return false;\r\n}\r\nfunction classMatchesRegex(node, regex, checkAncestors) {\r\n    if (!node)\r\n        return false;\r\n    if (node.nodeType !== node.ELEMENT_NODE) {\r\n        if (!checkAncestors)\r\n            return false;\r\n        return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n    }\r\n    for (var eIndex = node.classList.length; eIndex--;) {\r\n        var className = node.classList[eIndex];\r\n        if (regex.test(className)) {\r\n            return true;\r\n        }\r\n    }\r\n    if (!checkAncestors)\r\n        return false;\r\n    return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n}\r\nfunction needMaskingText(node, maskTextClass, maskTextSelector) {\r\n    var el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (el === null)\r\n        return false;\r\n    if (typeof maskTextClass === 'string') {\r\n        if (el.classList.contains(maskTextClass))\r\n            return true;\r\n        if (el.closest(\".\".concat(maskTextClass)))\r\n            return true;\r\n    }\r\n    else {\r\n        if (classMatchesRegex(el, maskTextClass, true))\r\n            return true;\r\n    }\r\n    if (maskTextSelector) {\r\n        if (el.matches(maskTextSelector))\r\n            return true;\r\n        if (el.closest(maskTextSelector))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\r\n    var win = iframeEl.contentWindow;\r\n    if (!win) {\r\n        return;\r\n    }\r\n    var fired = false;\r\n    var readyState;\r\n    try {\r\n        readyState = win.document.readyState;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (readyState !== 'complete') {\r\n        var timer_1 = setTimeout(function () {\r\n            if (!fired) {\r\n                listener();\r\n                fired = true;\r\n            }\r\n        }, iframeLoadTimeout);\r\n        iframeEl.addEventListener('load', function () {\r\n            clearTimeout(timer_1);\r\n            fired = true;\r\n            listener();\r\n        });\r\n        return;\r\n    }\r\n    var blankUrl = 'about:blank';\r\n    if (win.location.href !== blankUrl ||\r\n        iframeEl.src === blankUrl ||\r\n        iframeEl.src === '') {\r\n        setTimeout(listener, 0);\r\n        return iframeEl.addEventListener('load', listener);\r\n    }\r\n    iframeEl.addEventListener('load', listener);\r\n}\r\nfunction onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {\r\n    var fired = false;\r\n    var styleSheetLoaded;\r\n    try {\r\n        styleSheetLoaded = link.sheet;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (styleSheetLoaded)\r\n        return;\r\n    var timer = setTimeout(function () {\r\n        if (!fired) {\r\n            listener();\r\n            fired = true;\r\n        }\r\n    }, styleSheetLoadTimeout);\r\n    link.addEventListener('load', function () {\r\n        clearTimeout(timer);\r\n        fired = true;\r\n        listener();\r\n    });\r\n}\r\nfunction serializeNode(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c;\r\n    var rootId = getRootId(doc, mirror);\r\n    switch (n.nodeType) {\r\n        case n.DOCUMENT_NODE:\r\n            if (n.compatMode !== 'CSS1Compat') {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: [],\r\n                    compatMode: n.compatMode\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: []\r\n                };\r\n            }\r\n        case n.DOCUMENT_TYPE_NODE:\r\n            return {\r\n                type: NodeType.DocumentType,\r\n                name: n.name,\r\n                publicId: n.publicId,\r\n                systemId: n.systemId,\r\n                rootId: rootId\r\n            };\r\n        case n.ELEMENT_NODE:\r\n            return serializeElementNode(n, {\r\n                doc: doc,\r\n                blockClass: blockClass,\r\n                blockSelector: blockSelector,\r\n                inlineStylesheet: inlineStylesheet,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn,\r\n                dataURLOptions: dataURLOptions,\r\n                inlineImages: inlineImages,\r\n                recordCanvas: recordCanvas,\r\n                keepIframeSrcFn: keepIframeSrcFn,\r\n                newlyAddedElement: newlyAddedElement,\r\n                rootId: rootId\r\n            });\r\n        case n.TEXT_NODE:\r\n            return serializeTextNode(n, {\r\n                maskTextClass: maskTextClass,\r\n                maskTextSelector: maskTextSelector,\r\n                maskTextFn: maskTextFn,\r\n                rootId: rootId\r\n            });\r\n        case n.CDATA_SECTION_NODE:\r\n            return {\r\n                type: NodeType.CDATA,\r\n                textContent: '',\r\n                rootId: rootId\r\n            };\r\n        case n.COMMENT_NODE:\r\n            return {\r\n                type: NodeType.Comment,\r\n                textContent: n.textContent || '',\r\n                rootId: rootId\r\n            };\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction getRootId(doc, mirror) {\r\n    if (!mirror.hasNode(doc))\r\n        return undefined;\r\n    var docId = mirror.getId(doc);\r\n    return docId === 1 ? undefined : docId;\r\n}\r\nfunction serializeTextNode(n, options) {\r\n    var _a;\r\n    var maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, maskTextFn = options.maskTextFn, rootId = options.rootId;\r\n    var parentTagName = n.parentNode && n.parentNode.tagName;\r\n    var textContent = n.textContent;\r\n    var isStyle = parentTagName === 'STYLE' ? true : undefined;\r\n    var isScript = parentTagName === 'SCRIPT' ? true : undefined;\r\n    if (isStyle && textContent) {\r\n        try {\r\n            if (n.nextSibling || n.previousSibling) {\r\n            }\r\n            else if ((_a = n.parentNode.sheet) === null || _a === void 0 ? void 0 : _a.cssRules) {\r\n                textContent = stringifyStyleSheet(n.parentNode.sheet);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.warn(\"Cannot get CSS styles from text's parentNode. Error: \".concat(err), n);\r\n        }\r\n        textContent = absoluteToStylesheet(textContent, getHref());\r\n    }\r\n    if (isScript) {\r\n        textContent = 'SCRIPT_PLACEHOLDER';\r\n    }\r\n    if (!isStyle &&\r\n        !isScript &&\r\n        textContent &&\r\n        needMaskingText(n, maskTextClass, maskTextSelector)) {\r\n        textContent = maskTextFn\r\n            ? maskTextFn(textContent)\r\n            : textContent.replace(/[\\S]/g, '*');\r\n    }\r\n    return {\r\n        type: NodeType.Text,\r\n        textContent: textContent || '',\r\n        isStyle: isStyle,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction serializeElementNode(n, options) {\r\n    var doc = options.doc, blockClass = options.blockClass, blockSelector = options.blockSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c, rootId = options.rootId;\r\n    var needBlock = _isBlockedElement(n, blockClass, blockSelector);\r\n    var tagName = getValidTagName(n);\r\n    var attributes = {};\r\n    var len = n.attributes.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var attr = n.attributes[i];\r\n        attributes[attr.name] = transformAttribute(doc, tagName, attr.name, attr.value);\r\n    }\r\n    if (tagName === 'link' && inlineStylesheet) {\r\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) {\r\n            return s.href === n.href;\r\n        });\r\n        var cssText = null;\r\n        if (stylesheet) {\r\n            cssText = getCssRulesString(stylesheet);\r\n        }\r\n        if (cssText) {\r\n            delete attributes.rel;\r\n            delete attributes.href;\r\n            attributes._cssText = absoluteToStylesheet(cssText, stylesheet.href);\r\n        }\r\n    }\r\n    if (tagName === 'style' &&\r\n        n.sheet &&\r\n        !(n.innerText || n.textContent || '').trim().length) {\r\n        var cssText = getCssRulesString(n.sheet);\r\n        if (cssText) {\r\n            attributes._cssText = absoluteToStylesheet(cssText, getHref());\r\n        }\r\n    }\r\n    if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\r\n        var value = n.value;\r\n        var checked = n.checked;\r\n        if (attributes.type !== 'radio' &&\r\n            attributes.type !== 'checkbox' &&\r\n            attributes.type !== 'submit' &&\r\n            attributes.type !== 'button' &&\r\n            value) {\r\n            attributes.value = maskInputValue({\r\n                type: attributes.type,\r\n                tagName: tagName,\r\n                value: value,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn\r\n            });\r\n        }\r\n        else if (checked) {\r\n            attributes.checked = checked;\r\n        }\r\n    }\r\n    if (tagName === 'option') {\r\n        if (n.selected && !maskInputOptions['select']) {\r\n            attributes.selected = true;\r\n        }\r\n        else {\r\n            delete attributes.selected;\r\n        }\r\n    }\r\n    if (tagName === 'canvas' && recordCanvas) {\r\n        if (n.__context === '2d') {\r\n            if (!is2DCanvasBlank(n)) {\r\n                attributes.rr_dataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n        }\r\n        else if (!('__context' in n)) {\r\n            var canvasDataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            var blankCanvas = document.createElement('canvas');\r\n            blankCanvas.width = n.width;\r\n            blankCanvas.height = n.height;\r\n            var blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            if (canvasDataURL !== blankCanvasDataURL) {\r\n                attributes.rr_dataURL = canvasDataURL;\r\n            }\r\n        }\r\n    }\r\n    if (tagName === 'img' && inlineImages) {\r\n        if (!canvasService) {\r\n            canvasService = doc.createElement('canvas');\r\n            canvasCtx = canvasService.getContext('2d');\r\n        }\r\n        var image_1 = n;\r\n        var oldValue_1 = image_1.crossOrigin;\r\n        image_1.crossOrigin = 'anonymous';\r\n        var recordInlineImage = function () {\r\n            try {\r\n                canvasService.width = image_1.naturalWidth;\r\n                canvasService.height = image_1.naturalHeight;\r\n                canvasCtx.drawImage(image_1, 0, 0);\r\n                attributes.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n            catch (err) {\r\n                console.warn(\"Cannot inline img src=\".concat(image_1.currentSrc, \"! Error: \").concat(err));\r\n            }\r\n            oldValue_1\r\n                ? (attributes.crossOrigin = oldValue_1)\r\n                : image_1.removeAttribute('crossorigin');\r\n        };\r\n        if (image_1.complete && image_1.naturalWidth !== 0)\r\n            recordInlineImage();\r\n        else\r\n            image_1.onload = recordInlineImage;\r\n    }\r\n    if (tagName === 'audio' || tagName === 'video') {\r\n        attributes.rr_mediaState = n.paused\r\n            ? 'paused'\r\n            : 'played';\r\n        attributes.rr_mediaCurrentTime = n.currentTime;\r\n    }\r\n    if (!newlyAddedElement) {\r\n        if (n.scrollLeft) {\r\n            attributes.rr_scrollLeft = n.scrollLeft;\r\n        }\r\n        if (n.scrollTop) {\r\n            attributes.rr_scrollTop = n.scrollTop;\r\n        }\r\n    }\r\n    if (needBlock) {\r\n        var _d = n.getBoundingClientRect(), width = _d.width, height = _d.height;\r\n        attributes = {\r\n            \"class\": attributes[\"class\"],\r\n            rr_width: \"\".concat(width, \"px\"),\r\n            rr_height: \"\".concat(height, \"px\")\r\n        };\r\n    }\r\n    if (tagName === 'iframe' && !keepIframeSrcFn(attributes.src)) {\r\n        if (!n.contentDocument) {\r\n            attributes.rr_src = attributes.src;\r\n        }\r\n        delete attributes.src;\r\n    }\r\n    return {\r\n        type: NodeType.Element,\r\n        tagName: tagName,\r\n        attributes: attributes,\r\n        childNodes: [],\r\n        isSVG: isSVGElement(n) || undefined,\r\n        needBlock: needBlock,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction lowerIfExists(maybeAttr) {\r\n    if (maybeAttr === undefined) {\r\n        return '';\r\n    }\r\n    else {\r\n        return maybeAttr.toLowerCase();\r\n    }\r\n}\r\nfunction slimDOMExcluded(sn, slimDOMOptions) {\r\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\r\n        return true;\r\n    }\r\n    else if (sn.type === NodeType.Element) {\r\n        if (slimDOMOptions.script &&\r\n            (sn.tagName === 'script' ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'preload' &&\r\n                    sn.attributes.as === 'script') ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'prefetch' &&\r\n                    typeof sn.attributes.href === 'string' &&\r\n                    sn.attributes.href.endsWith('.js')))) {\r\n            return true;\r\n        }\r\n        else if (slimDOMOptions.headFavicon &&\r\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\r\n                (sn.tagName === 'meta' &&\r\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\r\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\r\n            return true;\r\n        }\r\n        else if (sn.tagName === 'meta') {\r\n            if (slimDOMOptions.headMetaDescKeywords &&\r\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaSocial &&\r\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\r\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\r\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaRobots &&\r\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\r\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\r\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaHttpEquiv &&\r\n                sn.attributes['http-equiv'] !== undefined) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaAuthorship &&\r\n                (lowerIfExists(sn.attributes.name) === 'author' ||\r\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\r\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\r\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\r\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\r\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\r\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaVerification &&\r\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\r\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction serializeNodeWithId(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.inlineStylesheet, inlineStylesheet = _b === void 0 ? true : _b, _c = options.maskInputOptions, maskInputOptions = _c === void 0 ? {} : _c, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, slimDOMOptions = options.slimDOMOptions, _d = options.dataURLOptions, dataURLOptions = _d === void 0 ? {} : _d, _e = options.inlineImages, inlineImages = _e === void 0 ? false : _e, _f = options.recordCanvas, recordCanvas = _f === void 0 ? false : _f, onSerialize = options.onSerialize, onIframeLoad = options.onIframeLoad, _g = options.iframeLoadTimeout, iframeLoadTimeout = _g === void 0 ? 5000 : _g, onStylesheetLoad = options.onStylesheetLoad, _h = options.stylesheetLoadTimeout, stylesheetLoadTimeout = _h === void 0 ? 5000 : _h, _j = options.keepIframeSrcFn, keepIframeSrcFn = _j === void 0 ? function () { return false; } : _j, _k = options.newlyAddedElement, newlyAddedElement = _k === void 0 ? false : _k;\r\n    var _l = options.preserveWhiteSpace, preserveWhiteSpace = _l === void 0 ? true : _l;\r\n    var _serializedNode = serializeNode(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: newlyAddedElement\r\n    });\r\n    if (!_serializedNode) {\r\n        console.warn(n, 'not serialized');\r\n        return null;\r\n    }\r\n    var id;\r\n    if (mirror.hasNode(n)) {\r\n        id = mirror.getId(n);\r\n    }\r\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\r\n        (!preserveWhiteSpace &&\r\n            _serializedNode.type === NodeType.Text &&\r\n            !_serializedNode.isStyle &&\r\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\r\n        id = IGNORED_NODE;\r\n    }\r\n    else {\r\n        id = genId();\r\n    }\r\n    var serializedNode = Object.assign(_serializedNode, { id: id });\r\n    mirror.add(n, serializedNode);\r\n    if (id === IGNORED_NODE) {\r\n        return null;\r\n    }\r\n    if (onSerialize) {\r\n        onSerialize(n);\r\n    }\r\n    var recordChild = !skipChild;\r\n    if (serializedNode.type === NodeType.Element) {\r\n        recordChild = recordChild && !serializedNode.needBlock;\r\n        delete serializedNode.needBlock;\r\n        var shadowRoot = n.shadowRoot;\r\n        if (shadowRoot && isNativeShadowDom(shadowRoot))\r\n            serializedNode.isShadowHost = true;\r\n    }\r\n    if ((serializedNode.type === NodeType.Document ||\r\n        serializedNode.type === NodeType.Element) &&\r\n        recordChild) {\r\n        if (slimDOMOptions.headWhitespace &&\r\n            serializedNode.type === NodeType.Element &&\r\n            serializedNode.tagName === 'head') {\r\n            preserveWhiteSpace = false;\r\n        }\r\n        var bypassOptions = {\r\n            doc: doc,\r\n            mirror: mirror,\r\n            blockClass: blockClass,\r\n            blockSelector: blockSelector,\r\n            maskTextClass: maskTextClass,\r\n            maskTextSelector: maskTextSelector,\r\n            skipChild: skipChild,\r\n            inlineStylesheet: inlineStylesheet,\r\n            maskInputOptions: maskInputOptions,\r\n            maskTextFn: maskTextFn,\r\n            maskInputFn: maskInputFn,\r\n            slimDOMOptions: slimDOMOptions,\r\n            dataURLOptions: dataURLOptions,\r\n            inlineImages: inlineImages,\r\n            recordCanvas: recordCanvas,\r\n            preserveWhiteSpace: preserveWhiteSpace,\r\n            onSerialize: onSerialize,\r\n            onIframeLoad: onIframeLoad,\r\n            iframeLoadTimeout: iframeLoadTimeout,\r\n            onStylesheetLoad: onStylesheetLoad,\r\n            stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n            keepIframeSrcFn: keepIframeSrcFn\r\n        };\r\n        for (var _i = 0, _m = Array.from(n.childNodes); _i < _m.length; _i++) {\r\n            var childN = _m[_i];\r\n            var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n            if (serializedChildNode) {\r\n                serializedNode.childNodes.push(serializedChildNode);\r\n            }\r\n        }\r\n        if (isElement(n) && n.shadowRoot) {\r\n            for (var _o = 0, _p = Array.from(n.shadowRoot.childNodes); _o < _p.length; _o++) {\r\n                var childN = _p[_o];\r\n                var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n                if (serializedChildNode) {\r\n                    isNativeShadowDom(n.shadowRoot) &&\r\n                        (serializedChildNode.isShadow = true);\r\n                    serializedNode.childNodes.push(serializedChildNode);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (n.parentNode &&\r\n        isShadowRoot(n.parentNode) &&\r\n        isNativeShadowDom(n.parentNode)) {\r\n        serializedNode.isShadow = true;\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'iframe') {\r\n        onceIframeLoaded(n, function () {\r\n            var iframeDoc = n.contentDocument;\r\n            if (iframeDoc && onIframeLoad) {\r\n                var serializedIframeNode = serializeNodeWithId(iframeDoc, {\r\n                    doc: iframeDoc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedIframeNode) {\r\n                    onIframeLoad(n, serializedIframeNode);\r\n                }\r\n            }\r\n        }, iframeLoadTimeout);\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'link' &&\r\n        serializedNode.attributes.rel === 'stylesheet') {\r\n        onceStylesheetLoaded(n, function () {\r\n            if (onStylesheetLoad) {\r\n                var serializedLinkNode = serializeNodeWithId(n, {\r\n                    doc: doc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedLinkNode) {\r\n                    onStylesheetLoad(n, serializedLinkNode);\r\n                }\r\n            }\r\n        }, stylesheetLoadTimeout);\r\n    }\r\n    return serializedNode;\r\n}\r\nfunction snapshot(n, options) {\r\n    var _a = options || {}, _b = _a.mirror, mirror = _b === void 0 ? new Mirror() : _b, _c = _a.blockClass, blockClass = _c === void 0 ? 'rr-block' : _c, _d = _a.blockSelector, blockSelector = _d === void 0 ? null : _d, _e = _a.maskTextClass, maskTextClass = _e === void 0 ? 'rr-mask' : _e, _f = _a.maskTextSelector, maskTextSelector = _f === void 0 ? null : _f, _g = _a.inlineStylesheet, inlineStylesheet = _g === void 0 ? true : _g, _h = _a.inlineImages, inlineImages = _h === void 0 ? false : _h, _j = _a.recordCanvas, recordCanvas = _j === void 0 ? false : _j, _k = _a.maskAllInputs, maskAllInputs = _k === void 0 ? false : _k, maskTextFn = _a.maskTextFn, maskInputFn = _a.maskInputFn, _l = _a.slimDOM, slimDOM = _l === void 0 ? false : _l, dataURLOptions = _a.dataURLOptions, preserveWhiteSpace = _a.preserveWhiteSpace, onSerialize = _a.onSerialize, onIframeLoad = _a.onIframeLoad, iframeLoadTimeout = _a.iframeLoadTimeout, onStylesheetLoad = _a.onStylesheetLoad, stylesheetLoadTimeout = _a.stylesheetLoadTimeout, _m = _a.keepIframeSrcFn, keepIframeSrcFn = _m === void 0 ? function () { return false; } : _m;\r\n    var maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true\r\n        }\r\n        : maskAllInputs === false\r\n            ? {\r\n                password: true\r\n            }\r\n            : maskAllInputs;\r\n    var slimDOMOptions = slimDOM === true || slimDOM === 'all'\r\n        ?\r\n            {\r\n                script: true,\r\n                comment: true,\r\n                headFavicon: true,\r\n                headWhitespace: true,\r\n                headMetaDescKeywords: slimDOM === 'all',\r\n                headMetaSocial: true,\r\n                headMetaRobots: true,\r\n                headMetaHttpEquiv: true,\r\n                headMetaAuthorship: true,\r\n                headMetaVerification: true\r\n            }\r\n        : slimDOM === false\r\n            ? {}\r\n            : slimDOM;\r\n    return serializeNodeWithId(n, {\r\n        doc: n,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        skipChild: false,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        slimDOMOptions: slimDOMOptions,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        preserveWhiteSpace: preserveWhiteSpace,\r\n        onSerialize: onSerialize,\r\n        onIframeLoad: onIframeLoad,\r\n        iframeLoadTimeout: iframeLoadTimeout,\r\n        onStylesheetLoad: onStylesheetLoad,\r\n        stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: false\r\n    });\r\n}\r\n\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\r\nfunction parse(css, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var lineno = 1;\r\n    var column = 1;\r\n    function updatePosition(str) {\r\n        var lines = str.match(/\\n/g);\r\n        if (lines) {\r\n            lineno += lines.length;\r\n        }\r\n        var i = str.lastIndexOf('\\n');\r\n        column = i === -1 ? column + str.length : str.length - i;\r\n    }\r\n    function position() {\r\n        var start = { line: lineno, column: column };\r\n        return function (node) {\r\n            node.position = new Position(start);\r\n            whitespace();\r\n            return node;\r\n        };\r\n    }\r\n    var Position = (function () {\r\n        function Position(start) {\r\n            this.start = start;\r\n            this.end = { line: lineno, column: column };\r\n            this.source = options.source;\r\n        }\r\n        return Position;\r\n    }());\r\n    Position.prototype.content = css;\r\n    var errorsList = [];\r\n    function error(msg) {\r\n        var err = new Error(\"\".concat(options.source || '', \":\").concat(lineno, \":\").concat(column, \": \").concat(msg));\r\n        err.reason = msg;\r\n        err.filename = options.source;\r\n        err.line = lineno;\r\n        err.column = column;\r\n        err.source = css;\r\n        if (options.silent) {\r\n            errorsList.push(err);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    function stylesheet() {\r\n        var rulesList = rules();\r\n        return {\r\n            type: 'stylesheet',\r\n            stylesheet: {\r\n                source: options.source,\r\n                rules: rulesList,\r\n                parsingErrors: errorsList\r\n            }\r\n        };\r\n    }\r\n    function open() {\r\n        return match(/^{\\s*/);\r\n    }\r\n    function close() {\r\n        return match(/^}/);\r\n    }\r\n    function rules() {\r\n        var node;\r\n        var rules = [];\r\n        whitespace();\r\n        comments(rules);\r\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\r\n            if (node !== false) {\r\n                rules.push(node);\r\n                comments(rules);\r\n            }\r\n        }\r\n        return rules;\r\n    }\r\n    function match(re) {\r\n        var m = re.exec(css);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var str = m[0];\r\n        updatePosition(str);\r\n        css = css.slice(str.length);\r\n        return m;\r\n    }\r\n    function whitespace() {\r\n        match(/^\\s*/);\r\n    }\r\n    function comments(rules) {\r\n        if (rules === void 0) { rules = []; }\r\n        var c;\r\n        while ((c = comment())) {\r\n            if (c !== false) {\r\n                rules.push(c);\r\n            }\r\n            c = comment();\r\n        }\r\n        return rules;\r\n    }\r\n    function comment() {\r\n        var pos = position();\r\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\r\n            return;\r\n        }\r\n        var i = 2;\r\n        while ('' !== css.charAt(i) &&\r\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\r\n            ++i;\r\n        }\r\n        i += 2;\r\n        if ('' === css.charAt(i - 1)) {\r\n            return error('End of comment missing');\r\n        }\r\n        var str = css.slice(2, i - 2);\r\n        column += 2;\r\n        updatePosition(str);\r\n        css = css.slice(i);\r\n        column += 2;\r\n        return pos({\r\n            type: 'comment',\r\n            comment: str\r\n        });\r\n    }\r\n    function selector() {\r\n        var m = match(/^([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return trim(m[0])\r\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\r\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\r\n            return m.replace(/,/g, '\\u200C');\r\n        })\r\n            .split(/\\s*(?![^(]*\\)),\\s*/)\r\n            .map(function (s) {\r\n            return s.replace(/\\u200C/g, ',');\r\n        });\r\n    }\r\n    function declaration() {\r\n        var pos = position();\r\n        var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\r\n        if (!propMatch) {\r\n            return;\r\n        }\r\n        var prop = trim(propMatch[0]);\r\n        if (!match(/^:\\s*/)) {\r\n            return error(\"property missing ':'\");\r\n        }\r\n        var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\r\n        var ret = pos({\r\n            type: 'declaration',\r\n            property: prop.replace(commentre, ''),\r\n            value: val ? trim(val[0]).replace(commentre, '') : ''\r\n        });\r\n        match(/^[;\\s]*/);\r\n        return ret;\r\n    }\r\n    function declarations() {\r\n        var decls = [];\r\n        if (!open()) {\r\n            return error(\"missing '{'\");\r\n        }\r\n        comments(decls);\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            if (decl !== false) {\r\n                decls.push(decl);\r\n                comments(decls);\r\n            }\r\n            decl = declaration();\r\n        }\r\n        if (!close()) {\r\n            return error(\"missing '}'\");\r\n        }\r\n        return decls;\r\n    }\r\n    function keyframe() {\r\n        var m;\r\n        var vals = [];\r\n        var pos = position();\r\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\r\n            vals.push(m[1]);\r\n            match(/^,\\s*/);\r\n        }\r\n        if (!vals.length) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'keyframe',\r\n            values: vals,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    function atkeyframes() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = m[1];\r\n        m = match(/^([-\\w]+)\\s*/);\r\n        if (!m) {\r\n            return error('@keyframes missing name');\r\n        }\r\n        var name = m[1];\r\n        if (!open()) {\r\n            return error(\"@keyframes missing '{'\");\r\n        }\r\n        var frame;\r\n        var frames = comments();\r\n        while ((frame = keyframe())) {\r\n            frames.push(frame);\r\n            frames = frames.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@keyframes missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'keyframes',\r\n            name: name,\r\n            vendor: vendor,\r\n            keyframes: frames\r\n        });\r\n    }\r\n    function atsupports() {\r\n        var pos = position();\r\n        var m = match(/^@supports *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var supports = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@supports missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@supports missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'supports',\r\n            supports: supports,\r\n            rules: style\r\n        });\r\n    }\r\n    function athost() {\r\n        var pos = position();\r\n        var m = match(/^@host\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@host missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@host missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'host',\r\n            rules: style\r\n        });\r\n    }\r\n    function atmedia() {\r\n        var pos = position();\r\n        var m = match(/^@media *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var media = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@media missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@media missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'media',\r\n            media: media,\r\n            rules: style\r\n        });\r\n    }\r\n    function atcustommedia() {\r\n        var pos = position();\r\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'custom-media',\r\n            name: trim(m[1]),\r\n            media: trim(m[2])\r\n        });\r\n    }\r\n    function atpage() {\r\n        var pos = position();\r\n        var m = match(/^@page */);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var sel = selector() || [];\r\n        if (!open()) {\r\n            return error(\"@page missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@page missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'page',\r\n            selectors: sel,\r\n            declarations: decls\r\n        });\r\n    }\r\n    function atdocument() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = trim(m[1]);\r\n        var doc = trim(m[2]);\r\n        if (!open()) {\r\n            return error(\"@document missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@document missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'document',\r\n            document: doc,\r\n            vendor: vendor,\r\n            rules: style\r\n        });\r\n    }\r\n    function atfontface() {\r\n        var pos = position();\r\n        var m = match(/^@font-face\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@font-face missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@font-face missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'font-face',\r\n            declarations: decls\r\n        });\r\n    }\r\n    var atimport = _compileAtrule('import');\r\n    var atcharset = _compileAtrule('charset');\r\n    var atnamespace = _compileAtrule('namespace');\r\n    function _compileAtrule(name) {\r\n        var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\r\n        return function () {\r\n            var pos = position();\r\n            var m = match(re);\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var ret = { type: name };\r\n            ret[name] = m[1].trim();\r\n            return pos(ret);\r\n        };\r\n    }\r\n    function atrule() {\r\n        if (css[0] !== '@') {\r\n            return;\r\n        }\r\n        return (atkeyframes() ||\r\n            atmedia() ||\r\n            atcustommedia() ||\r\n            atsupports() ||\r\n            atimport() ||\r\n            atcharset() ||\r\n            atnamespace() ||\r\n            atdocument() ||\r\n            atpage() ||\r\n            athost() ||\r\n            atfontface());\r\n    }\r\n    function rule() {\r\n        var pos = position();\r\n        var sel = selector();\r\n        if (!sel) {\r\n            return error('selector missing');\r\n        }\r\n        comments();\r\n        return pos({\r\n            type: 'rule',\r\n            selectors: sel,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    return addParent(stylesheet());\r\n}\r\nfunction trim(str) {\r\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\r\n}\r\nfunction addParent(obj, parent) {\r\n    var isNode = obj && typeof obj.type === 'string';\r\n    var childParent = isNode ? obj : parent;\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var k = _a[_i];\r\n        var value = obj[k];\r\n        if (Array.isArray(value)) {\r\n            value.forEach(function (v) {\r\n                addParent(v, childParent);\r\n            });\r\n        }\r\n        else if (value && typeof value === 'object') {\r\n            addParent(value, childParent);\r\n        }\r\n    }\r\n    if (isNode) {\r\n        Object.defineProperty(obj, 'parent', {\r\n            configurable: true,\r\n            writable: true,\r\n            enumerable: false,\r\n            value: parent || null\r\n        });\r\n    }\r\n    return obj;\r\n}\n\nvar tagMap = {\r\n    script: 'noscript',\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient'\r\n};\r\nfunction getTagName(n) {\r\n    var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\r\n    if (tagName === 'link' && n.attributes._cssText) {\r\n        tagName = 'style';\r\n    }\r\n    return tagName;\r\n}\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\nvar HOVER_SELECTOR = /([^\\\\]):hover/;\r\nvar HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR.source, 'g');\r\nfunction addHoverClass(cssText, cache) {\r\n    var cachedStyle = cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.get(cssText);\r\n    if (cachedStyle)\r\n        return cachedStyle;\r\n    var ast = parse(cssText, {\r\n        silent: true\r\n    });\r\n    if (!ast.stylesheet) {\r\n        return cssText;\r\n    }\r\n    var selectors = [];\r\n    ast.stylesheet.rules.forEach(function (rule) {\r\n        if ('selectors' in rule) {\r\n            (rule.selectors || []).forEach(function (selector) {\r\n                if (HOVER_SELECTOR.test(selector)) {\r\n                    selectors.push(selector);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    if (selectors.length === 0) {\r\n        return cssText;\r\n    }\r\n    var selectorMatcher = new RegExp(selectors\r\n        .filter(function (selector, index) { return selectors.indexOf(selector) === index; })\r\n        .sort(function (a, b) { return b.length - a.length; })\r\n        .map(function (selector) {\r\n        return escapeRegExp(selector);\r\n    })\r\n        .join('|'), 'g');\r\n    var result = cssText.replace(selectorMatcher, function (selector) {\r\n        var newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\r\n        return \"\".concat(selector, \", \").concat(newSelector);\r\n    });\r\n    cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.set(cssText, result);\r\n    return result;\r\n}\r\nfunction createCache() {\r\n    var stylesWithHoverClass = new Map();\r\n    return {\r\n        stylesWithHoverClass: stylesWithHoverClass\r\n    };\r\n}\r\nfunction buildNode(n, options) {\r\n    var doc = options.doc, hackCss = options.hackCss, cache = options.cache;\r\n    switch (n.type) {\r\n        case NodeType.Document:\r\n            return doc.implementation.createDocument(null, '', null);\r\n        case NodeType.DocumentType:\r\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\r\n        case NodeType.Element: {\r\n            var tagName = getTagName(n);\r\n            var node_1;\r\n            if (n.isSVG) {\r\n                node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\r\n            }\r\n            else {\r\n                node_1 = doc.createElement(tagName);\r\n            }\r\n            var specialAttributes = {};\r\n            for (var name_1 in n.attributes) {\r\n                if (!Object.prototype.hasOwnProperty.call(n.attributes, name_1)) {\r\n                    continue;\r\n                }\r\n                var value = n.attributes[name_1];\r\n                if (tagName === 'option' &&\r\n                    name_1 === 'selected' &&\r\n                    value === false) {\r\n                    continue;\r\n                }\r\n                if (value === true)\r\n                    value = '';\r\n                if (name_1.startsWith('rr_')) {\r\n                    specialAttributes[name_1] = value;\r\n                    continue;\r\n                }\r\n                var isTextarea = tagName === 'textarea' && name_1 === 'value';\r\n                var isRemoteOrDynamicCss = tagName === 'style' && name_1 === '_cssText';\r\n                if (isRemoteOrDynamicCss && hackCss && typeof value === 'string') {\r\n                    value = addHoverClass(value, cache);\r\n                }\r\n                if ((isTextarea || isRemoteOrDynamicCss) && typeof value === 'string') {\r\n                    var child = doc.createTextNode(value);\r\n                    for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\r\n                        var c = _a[_i];\r\n                        if (c.nodeType === node_1.TEXT_NODE) {\r\n                            node_1.removeChild(c);\r\n                        }\r\n                    }\r\n                    node_1.appendChild(child);\r\n                    continue;\r\n                }\r\n                try {\r\n                    if (n.isSVG && name_1 === 'xlink:href') {\r\n                        node_1.setAttributeNS('http://www.w3.org/1999/xlink', name_1, value.toString());\r\n                    }\r\n                    else if (name_1 === 'onload' ||\r\n                        name_1 === 'onclick' ||\r\n                        name_1.substring(0, 7) === 'onmouse') {\r\n                        node_1.setAttribute('_' + name_1, value.toString());\r\n                    }\r\n                    else if (tagName === 'meta' &&\r\n                        n.attributes['http-equiv'] === 'Content-Security-Policy' &&\r\n                        name_1 === 'content') {\r\n                        node_1.setAttribute('csp-content', value.toString());\r\n                        continue;\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'preload' &&\r\n                        n.attributes.as === 'script') {\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'prefetch' &&\r\n                        typeof n.attributes.href === 'string' &&\r\n                        n.attributes.href.endsWith('.js')) {\r\n                    }\r\n                    else if (tagName === 'img' &&\r\n                        n.attributes.srcset &&\r\n                        n.attributes.rr_dataURL) {\r\n                        node_1.setAttribute('rrweb-original-srcset', n.attributes.srcset);\r\n                    }\r\n                    else {\r\n                        node_1.setAttribute(name_1, value.toString());\r\n                    }\r\n                }\r\n                catch (error) {\r\n                }\r\n            }\r\n            var _loop_1 = function (name_2) {\r\n                var value = specialAttributes[name_2];\r\n                if (tagName === 'canvas' && name_2 === 'rr_dataURL') {\r\n                    var image_1 = document.createElement('img');\r\n                    image_1.onload = function () {\r\n                        var ctx = node_1.getContext('2d');\r\n                        if (ctx) {\r\n                            ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\r\n                        }\r\n                    };\r\n                    image_1.src = value.toString();\r\n                    if (node_1.RRNodeType)\r\n                        node_1.rr_dataURL = value.toString();\r\n                }\r\n                else if (tagName === 'img' && name_2 === 'rr_dataURL') {\r\n                    var image = node_1;\r\n                    if (!image.currentSrc.startsWith('data:')) {\r\n                        image.setAttribute('rrweb-original-src', n.attributes.src);\r\n                        image.src = value.toString();\r\n                    }\r\n                }\r\n                if (name_2 === 'rr_width') {\r\n                    node_1.style.width = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_height') {\r\n                    node_1.style.height = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_mediaCurrentTime' &&\r\n                    typeof value === 'number') {\r\n                    node_1.currentTime = value;\r\n                }\r\n                else if (name_2 === 'rr_mediaState') {\r\n                    switch (value) {\r\n                        case 'played':\r\n                            node_1\r\n                                .play()[\"catch\"](function (e) { return console.warn('media playback error', e); });\r\n                            break;\r\n                        case 'paused':\r\n                            node_1.pause();\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n            for (var name_2 in specialAttributes) {\r\n                _loop_1(name_2);\r\n            }\r\n            if (n.isShadowHost) {\r\n                if (!node_1.shadowRoot) {\r\n                    node_1.attachShadow({ mode: 'open' });\r\n                }\r\n                else {\r\n                    while (node_1.shadowRoot.firstChild) {\r\n                        node_1.shadowRoot.removeChild(node_1.shadowRoot.firstChild);\r\n                    }\r\n                }\r\n            }\r\n            return node_1;\r\n        }\r\n        case NodeType.Text:\r\n            return doc.createTextNode(n.isStyle && hackCss\r\n                ? addHoverClass(n.textContent, cache)\r\n                : n.textContent);\r\n        case NodeType.CDATA:\r\n            return doc.createCDATASection(n.textContent);\r\n        case NodeType.Comment:\r\n            return doc.createComment(n.textContent);\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nfunction buildNodeWithSN(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.hackCss, hackCss = _b === void 0 ? true : _b, afterAppend = options.afterAppend, cache = options.cache;\r\n    var node = buildNode(n, { doc: doc, hackCss: hackCss, cache: cache });\r\n    if (!node) {\r\n        return null;\r\n    }\r\n    if (n.rootId && mirror.getNode(n.rootId) !== doc) {\r\n        mirror.replace(n.rootId, doc);\r\n    }\r\n    if (n.type === NodeType.Document) {\r\n        doc.close();\r\n        doc.open();\r\n        if (n.compatMode === 'BackCompat' &&\r\n            n.childNodes &&\r\n            n.childNodes[0].type !== NodeType.DocumentType) {\r\n            if (n.childNodes[0].type === NodeType.Element &&\r\n                'xmlns' in n.childNodes[0].attributes &&\r\n                n.childNodes[0].attributes.xmlns === 'http://www.w3.org/1999/xhtml') {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">');\r\n            }\r\n            else {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">');\r\n            }\r\n        }\r\n        node = doc;\r\n    }\r\n    mirror.add(node, n);\r\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\r\n        !skipChild) {\r\n        for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\r\n            var childN = _c[_i];\r\n            var childNode = buildNodeWithSN(childN, {\r\n                doc: doc,\r\n                mirror: mirror,\r\n                skipChild: false,\r\n                hackCss: hackCss,\r\n                afterAppend: afterAppend,\r\n                cache: cache\r\n            });\r\n            if (!childNode) {\r\n                console.warn('Failed to rebuild', childN);\r\n                continue;\r\n            }\r\n            if (childN.isShadow && isElement(node) && node.shadowRoot) {\r\n                node.shadowRoot.appendChild(childNode);\r\n            }\r\n            else {\r\n                node.appendChild(childNode);\r\n            }\r\n            if (afterAppend) {\r\n                afterAppend(childNode, childN.id);\r\n            }\r\n        }\r\n    }\r\n    return node;\r\n}\r\nfunction visit(mirror, onVisit) {\r\n    function walk(node) {\r\n        onVisit(node);\r\n    }\r\n    for (var _i = 0, _a = mirror.getIds(); _i < _a.length; _i++) {\r\n        var id = _a[_i];\r\n        if (mirror.has(id)) {\r\n            walk(mirror.getNode(id));\r\n        }\r\n    }\r\n}\r\nfunction handleScroll(node, mirror) {\r\n    var n = mirror.getMeta(node);\r\n    if ((n === null || n === void 0 ? void 0 : n.type) !== NodeType.Element) {\r\n        return;\r\n    }\r\n    var el = node;\r\n    for (var name_3 in n.attributes) {\r\n        if (!(Object.prototype.hasOwnProperty.call(n.attributes, name_3) &&\r\n            name_3.startsWith('rr_'))) {\r\n            continue;\r\n        }\r\n        var value = n.attributes[name_3];\r\n        if (name_3 === 'rr_scrollLeft') {\r\n            el.scrollLeft = value;\r\n        }\r\n        if (name_3 === 'rr_scrollTop') {\r\n            el.scrollTop = value;\r\n        }\r\n    }\r\n}\r\nfunction rebuild(n, options) {\r\n    var doc = options.doc, onVisit = options.onVisit, _a = options.hackCss, hackCss = _a === void 0 ? true : _a, afterAppend = options.afterAppend, cache = options.cache, _b = options.mirror, mirror = _b === void 0 ? new Mirror() : _b;\r\n    var node = buildNodeWithSN(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        skipChild: false,\r\n        hackCss: hackCss,\r\n        afterAppend: afterAppend,\r\n        cache: cache\r\n    });\r\n    visit(mirror, function (visitedNode) {\r\n        if (onVisit) {\r\n            onVisit(visitedNode);\r\n        }\r\n        handleScroll(visitedNode, mirror);\r\n    });\r\n    return node;\r\n}\n\nexport { IGNORED_NODE, Mirror, NodeType, addHoverClass, buildNodeWithSN, classMatchesRegex, createCache, createMirror, genId, getCssRuleString, getCssRulesString, is2DCanvasBlank, isCSSImportRule, isElement, isNativeShadowDom, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, transformAttribute };\n",null,null,null,null,"import { classMatchesRegex, IGNORED_NODE, isShadowRoot } from '../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nfunction on(type, fn, target = document) {\r\n    const options = { capture: true, passive: true };\r\n    target.addEventListener(type, fn, options);\r\n    return () => target.removeEventListener(type, fn, options);\r\n}\r\nconst DEPARTED_MIRROR_ACCESS_WARNING = 'Please stop import mirror directly. Instead of that,' +\r\n    '\\r\\n' +\r\n    'now you can use replayer.getMirror() to access the mirror instance of a replayer,' +\r\n    '\\r\\n' +\r\n    'or you can use record.mirror to access the mirror instance during recording.';\r\nlet _mirror = {\r\n    map: {},\r\n    getId() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return -1;\r\n    },\r\n    getNode() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return null;\r\n    },\r\n    removeNodeFromMap() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n    has() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return false;\r\n    },\r\n    reset() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n};\r\nif (typeof window !== 'undefined' && window.Proxy && window.Reflect) {\r\n    _mirror = new Proxy(_mirror, {\r\n        get(target, prop, receiver) {\r\n            if (prop === 'map') {\r\n                console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n            }\r\n            return Reflect.get(target, prop, receiver);\r\n        },\r\n    });\r\n}\r\nfunction throttle(func, wait, options = {}) {\r\n    let timeout = null;\r\n    let previous = 0;\r\n    return function (...args) {\r\n        const now = Date.now();\r\n        if (!previous && options.leading === false) {\r\n            previous = now;\r\n        }\r\n        const remaining = wait - (now - previous);\r\n        const context = this;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            func.apply(context, args);\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(() => {\r\n                previous = options.leading === false ? 0 : Date.now();\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            }, remaining);\r\n        }\r\n    };\r\n}\r\nfunction hookSetter(target, key, d, isRevoked, win = window) {\r\n    const original = win.Object.getOwnPropertyDescriptor(target, key);\r\n    win.Object.defineProperty(target, key, isRevoked\r\n        ? d\r\n        : {\r\n            set(value) {\r\n                setTimeout(() => {\r\n                    d.set.call(this, value);\r\n                }, 0);\r\n                if (original && original.set) {\r\n                    original.set.call(this, value);\r\n                }\r\n            },\r\n        });\r\n    return () => hookSetter(target, key, original || {}, true);\r\n}\r\nfunction patch(source, name, replacement) {\r\n    try {\r\n        if (!(name in source)) {\r\n            return () => {\r\n            };\r\n        }\r\n        const original = source[name];\r\n        const wrapped = replacement(original);\r\n        if (typeof wrapped === 'function') {\r\n            wrapped.prototype = wrapped.prototype || {};\r\n            Object.defineProperties(wrapped, {\r\n                __rrweb_original__: {\r\n                    enumerable: false,\r\n                    value: original,\r\n                },\r\n            });\r\n        }\r\n        source[name] = wrapped;\r\n        return () => {\r\n            source[name] = original;\r\n        };\r\n    }\r\n    catch (_a) {\r\n        return () => {\r\n        };\r\n    }\r\n}\r\nfunction getWindowHeight() {\r\n    return (window.innerHeight ||\r\n        (document.documentElement && document.documentElement.clientHeight) ||\r\n        (document.body && document.body.clientHeight));\r\n}\r\nfunction getWindowWidth() {\r\n    return (window.innerWidth ||\r\n        (document.documentElement && document.documentElement.clientWidth) ||\r\n        (document.body && document.body.clientWidth));\r\n}\r\nfunction isBlocked(node, blockClass, blockSelector, checkAncestors) {\r\n    if (!node) {\r\n        return false;\r\n    }\r\n    const el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (!el)\r\n        return false;\r\n    if (typeof blockClass === 'string') {\r\n        if (el.classList.contains(blockClass))\r\n            return true;\r\n        if (checkAncestors && el.closest('.' + blockClass) !== null)\r\n            return true;\r\n    }\r\n    else {\r\n        if (classMatchesRegex(el, blockClass, checkAncestors))\r\n            return true;\r\n    }\r\n    if (blockSelector) {\r\n        if (node.matches(blockSelector))\r\n            return true;\r\n        if (checkAncestors && el.closest(blockSelector) !== null)\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSerialized(n, mirror) {\r\n    return mirror.getId(n) !== -1;\r\n}\r\nfunction isIgnored(n, mirror) {\r\n    return mirror.getId(n) === IGNORED_NODE;\r\n}\r\nfunction isAncestorRemoved(target, mirror) {\r\n    if (isShadowRoot(target)) {\r\n        return false;\r\n    }\r\n    const id = mirror.getId(target);\r\n    if (!mirror.has(id)) {\r\n        return true;\r\n    }\r\n    if (target.parentNode &&\r\n        target.parentNode.nodeType === target.DOCUMENT_NODE) {\r\n        return false;\r\n    }\r\n    if (!target.parentNode) {\r\n        return true;\r\n    }\r\n    return isAncestorRemoved(target.parentNode, mirror);\r\n}\r\nfunction isTouchEvent(event) {\r\n    return Boolean(event.changedTouches);\r\n}\r\nfunction polyfill(win = window) {\r\n    if ('NodeList' in win && !win.NodeList.prototype.forEach) {\r\n        win.NodeList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if ('DOMTokenList' in win && !win.DOMTokenList.prototype.forEach) {\r\n        win.DOMTokenList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if (!Node.prototype.contains) {\r\n        Node.prototype.contains = (...args) => {\r\n            let node = args[0];\r\n            if (!(0 in args)) {\r\n                throw new TypeError('1 argument is required');\r\n            }\r\n            do {\r\n                if (this === node) {\r\n                    return true;\r\n                }\r\n            } while ((node = node && node.parentNode));\r\n            return false;\r\n        };\r\n    }\r\n}\r\nfunction queueToResolveTrees(queue) {\r\n    const queueNodeMap = {};\r\n    const putIntoMap = (m, parent) => {\r\n        const nodeInTree = {\r\n            value: m,\r\n            parent,\r\n            children: [],\r\n        };\r\n        queueNodeMap[m.node.id] = nodeInTree;\r\n        return nodeInTree;\r\n    };\r\n    const queueNodeTrees = [];\r\n    for (const mutation of queue) {\r\n        const { nextId, parentId } = mutation;\r\n        if (nextId && nextId in queueNodeMap) {\r\n            const nextInTree = queueNodeMap[nextId];\r\n            if (nextInTree.parent) {\r\n                const idx = nextInTree.parent.children.indexOf(nextInTree);\r\n                nextInTree.parent.children.splice(idx, 0, putIntoMap(mutation, nextInTree.parent));\r\n            }\r\n            else {\r\n                const idx = queueNodeTrees.indexOf(nextInTree);\r\n                queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\r\n            }\r\n            continue;\r\n        }\r\n        if (parentId in queueNodeMap) {\r\n            const parentInTree = queueNodeMap[parentId];\r\n            parentInTree.children.push(putIntoMap(mutation, parentInTree));\r\n            continue;\r\n        }\r\n        queueNodeTrees.push(putIntoMap(mutation, null));\r\n    }\r\n    return queueNodeTrees;\r\n}\r\nfunction iterateResolveTree(tree, cb) {\r\n    cb(tree.value);\r\n    for (let i = tree.children.length - 1; i >= 0; i--) {\r\n        iterateResolveTree(tree.children[i], cb);\r\n    }\r\n}\r\nfunction isSerializedIframe(n, mirror) {\r\n    return Boolean(n.nodeName === 'IFRAME' && mirror.getMeta(n));\r\n}\r\nfunction isSerializedStylesheet(n, mirror) {\r\n    return Boolean(n.nodeName === 'LINK' &&\r\n        n.nodeType === n.ELEMENT_NODE &&\r\n        n.getAttribute &&\r\n        n.getAttribute('rel') === 'stylesheet' &&\r\n        mirror.getMeta(n));\r\n}\r\nfunction getBaseDimension(node, rootIframe) {\r\n    var _a, _b;\r\n    const frameElement = (_b = (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.frameElement;\r\n    if (!frameElement || frameElement === rootIframe) {\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            relativeScale: 1,\r\n            absoluteScale: 1,\r\n        };\r\n    }\r\n    const frameDimension = frameElement.getBoundingClientRect();\r\n    const frameBaseDimension = getBaseDimension(frameElement, rootIframe);\r\n    const relativeScale = frameDimension.height / frameElement.clientHeight;\r\n    return {\r\n        x: frameDimension.x * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.x,\r\n        y: frameDimension.y * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.y,\r\n        relativeScale,\r\n        absoluteScale: frameBaseDimension.absoluteScale * relativeScale,\r\n    };\r\n}\r\nfunction hasShadowRoot(n) {\r\n    return Boolean(n === null || n === void 0 ? void 0 : n.shadowRoot);\r\n}\r\nfunction getNestedRule(rules, position) {\r\n    const rule = rules[position[0]];\r\n    if (position.length === 1) {\r\n        return rule;\r\n    }\r\n    else {\r\n        return getNestedRule(rule.cssRules[position[1]].cssRules, position.slice(2));\r\n    }\r\n}\r\nfunction getPositionsAndIndex(nestedIndex) {\r\n    const positions = [...nestedIndex];\r\n    const index = positions.pop();\r\n    return { positions, index };\r\n}\r\nfunction uniqueTextMutations(mutations) {\r\n    const idSet = new Set();\r\n    const uniqueMutations = [];\r\n    for (let i = mutations.length; i--;) {\r\n        const mutation = mutations[i];\r\n        if (!idSet.has(mutation.id)) {\r\n            uniqueMutations.push(mutation);\r\n            idSet.add(mutation.id);\r\n        }\r\n    }\r\n    return uniqueMutations;\r\n}\r\nclass StyleSheetMirror {\r\n    constructor() {\r\n        this.id = 1;\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n    }\r\n    getId(stylesheet) {\r\n        var _a;\r\n        return (_a = this.styleIDMap.get(stylesheet)) !== null && _a !== void 0 ? _a : -1;\r\n    }\r\n    has(stylesheet) {\r\n        return this.styleIDMap.has(stylesheet);\r\n    }\r\n    add(stylesheet, id) {\r\n        if (this.has(stylesheet))\r\n            return this.getId(stylesheet);\r\n        let newId;\r\n        if (id === undefined) {\r\n            newId = this.id++;\r\n        }\r\n        else\r\n            newId = id;\r\n        this.styleIDMap.set(stylesheet, newId);\r\n        this.idStyleMap.set(newId, stylesheet);\r\n        return newId;\r\n    }\r\n    getStyle(id) {\r\n        return this.idStyleMap.get(id) || null;\r\n    }\r\n    reset() {\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n        this.id = 1;\r\n    }\r\n    generateId() {\r\n        return this.id++;\r\n    }\r\n}\n\nexport { StyleSheetMirror, _mirror, getBaseDimension, getNestedRule, getPositionsAndIndex, getWindowHeight, getWindowWidth, hasShadowRoot, hookSetter, isAncestorRemoved, isBlocked, isIgnored, isSerialized, isSerializedIframe, isSerializedStylesheet, isTouchEvent, iterateResolveTree, on, patch, polyfill, queueToResolveTrees, throttle, uniqueTextMutations };\n","var EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar ReplayerEvents = /* @__PURE__ */ ((ReplayerEvents2) => {\n  ReplayerEvents2[\"Start\"] = \"start\";\n  ReplayerEvents2[\"Pause\"] = \"pause\";\n  ReplayerEvents2[\"Resume\"] = \"resume\";\n  ReplayerEvents2[\"Resize\"] = \"resize\";\n  ReplayerEvents2[\"Finish\"] = \"finish\";\n  ReplayerEvents2[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n  ReplayerEvents2[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n  ReplayerEvents2[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n  ReplayerEvents2[\"SkipStart\"] = \"skip-start\";\n  ReplayerEvents2[\"SkipEnd\"] = \"skip-end\";\n  ReplayerEvents2[\"MouseInteraction\"] = \"mouse-interaction\";\n  ReplayerEvents2[\"EventCast\"] = \"event-cast\";\n  ReplayerEvents2[\"CustomEvent\"] = \"custom-event\";\n  ReplayerEvents2[\"Flush\"] = \"flush\";\n  ReplayerEvents2[\"StateChange\"] = \"state-change\";\n  ReplayerEvents2[\"PlayBack\"] = \"play-back\";\n  ReplayerEvents2[\"Destroy\"] = \"destroy\";\n  return ReplayerEvents2;\n})(ReplayerEvents || {});\n\nexport { CanvasContext, EventType, IncrementalSource, MouseInteractions, ReplayerEvents };\n","import { isShadowRoot, isNativeShadowDom, maskInputValue, transformAttribute, needMaskingText, IGNORED_NODE, serializeNodeWithId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { isIgnored, isBlocked, isSerialized, isAncestorRemoved, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\n\nfunction isNodeInLinkedList(n) {\r\n    return '__ln' in n;\r\n}\r\nclass DoubleLinkedList {\r\n    constructor() {\r\n        this.length = 0;\r\n        this.head = null;\r\n    }\r\n    get(position) {\r\n        if (position >= this.length) {\r\n            throw new Error('Position outside of list range');\r\n        }\r\n        let current = this.head;\r\n        for (let index = 0; index < position; index++) {\r\n            current = (current === null || current === void 0 ? void 0 : current.next) || null;\r\n        }\r\n        return current;\r\n    }\r\n    addNode(n) {\r\n        const node = {\r\n            value: n,\r\n            previous: null,\r\n            next: null,\r\n        };\r\n        n.__ln = node;\r\n        if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\r\n            const current = n.previousSibling.__ln.next;\r\n            node.next = current;\r\n            node.previous = n.previousSibling.__ln;\r\n            n.previousSibling.__ln.next = node;\r\n            if (current) {\r\n                current.previous = node;\r\n            }\r\n        }\r\n        else if (n.nextSibling &&\r\n            isNodeInLinkedList(n.nextSibling) &&\r\n            n.nextSibling.__ln.previous) {\r\n            const current = n.nextSibling.__ln.previous;\r\n            node.previous = current;\r\n            node.next = n.nextSibling.__ln;\r\n            n.nextSibling.__ln.previous = node;\r\n            if (current) {\r\n                current.next = node;\r\n            }\r\n        }\r\n        else {\r\n            if (this.head) {\r\n                this.head.previous = node;\r\n            }\r\n            node.next = this.head;\r\n            this.head = node;\r\n        }\r\n        this.length++;\r\n    }\r\n    removeNode(n) {\r\n        const current = n.__ln;\r\n        if (!this.head) {\r\n            return;\r\n        }\r\n        if (!current.previous) {\r\n            this.head = current.next;\r\n            if (this.head) {\r\n                this.head.previous = null;\r\n            }\r\n        }\r\n        else {\r\n            current.previous.next = current.next;\r\n            if (current.next) {\r\n                current.next.previous = current.previous;\r\n            }\r\n        }\r\n        if (n.__ln) {\r\n            delete n.__ln;\r\n        }\r\n        this.length--;\r\n    }\r\n}\r\nconst moveKey = (id, parentId) => `${id}@${parentId}`;\r\nclass MutationBuffer {\r\n    constructor() {\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.texts = [];\r\n        this.attributes = [];\r\n        this.removes = [];\r\n        this.mapRemoves = [];\r\n        this.movedMap = {};\r\n        this.addedSet = new Set();\r\n        this.movedSet = new Set();\r\n        this.droppedSet = new Set();\r\n        this.processMutations = (mutations) => {\r\n            mutations.forEach(this.processMutation);\r\n            this.emit();\r\n        };\r\n        this.emit = () => {\r\n            if (this.frozen || this.locked) {\r\n                return;\r\n            }\r\n            const adds = [];\r\n            const addList = new DoubleLinkedList();\r\n            const getNextId = (n) => {\r\n                let ns = n;\r\n                let nextId = IGNORED_NODE;\r\n                while (nextId === IGNORED_NODE) {\r\n                    ns = ns && ns.nextSibling;\r\n                    nextId = ns && this.mirror.getId(ns);\r\n                }\r\n                return nextId;\r\n            };\r\n            const pushAdd = (n) => {\r\n                var _a, _b, _c, _d;\r\n                let shadowHost = null;\r\n                if (((_b = (_a = n.getRootNode) === null || _a === void 0 ? void 0 : _a.call(n)) === null || _b === void 0 ? void 0 : _b.nodeType) === Node.DOCUMENT_FRAGMENT_NODE &&\r\n                    n.getRootNode().host)\r\n                    shadowHost = n.getRootNode().host;\r\n                let rootShadowHost = shadowHost;\r\n                while (((_d = (_c = rootShadowHost === null || rootShadowHost === void 0 ? void 0 : rootShadowHost.getRootNode) === null || _c === void 0 ? void 0 : _c.call(rootShadowHost)) === null || _d === void 0 ? void 0 : _d.nodeType) ===\r\n                    Node.DOCUMENT_FRAGMENT_NODE &&\r\n                    rootShadowHost.getRootNode().host)\r\n                    rootShadowHost = rootShadowHost.getRootNode().host;\r\n                const notInDoc = !this.doc.contains(n) &&\r\n                    (!rootShadowHost || !this.doc.contains(rootShadowHost));\r\n                if (!n.parentNode || notInDoc) {\r\n                    return;\r\n                }\r\n                const parentId = isShadowRoot(n.parentNode)\r\n                    ? this.mirror.getId(shadowHost)\r\n                    : this.mirror.getId(n.parentNode);\r\n                const nextId = getNextId(n);\r\n                if (parentId === -1 || nextId === -1) {\r\n                    return addList.addNode(n);\r\n                }\r\n                const sn = serializeNodeWithId(n, {\r\n                    doc: this.doc,\r\n                    mirror: this.mirror,\r\n                    blockClass: this.blockClass,\r\n                    blockSelector: this.blockSelector,\r\n                    maskTextClass: this.maskTextClass,\r\n                    maskTextSelector: this.maskTextSelector,\r\n                    skipChild: true,\r\n                    newlyAddedElement: true,\r\n                    inlineStylesheet: this.inlineStylesheet,\r\n                    maskInputOptions: this.maskInputOptions,\r\n                    maskTextFn: this.maskTextFn,\r\n                    maskInputFn: this.maskInputFn,\r\n                    slimDOMOptions: this.slimDOMOptions,\r\n                    dataURLOptions: this.dataURLOptions,\r\n                    recordCanvas: this.recordCanvas,\r\n                    inlineImages: this.inlineImages,\r\n                    onSerialize: (currentN) => {\r\n                        if (isSerializedIframe(currentN, this.mirror)) {\r\n                            this.iframeManager.addIframe(currentN);\r\n                        }\r\n                        if (isSerializedStylesheet(currentN, this.mirror)) {\r\n                            this.stylesheetManager.trackLinkElement(currentN);\r\n                        }\r\n                        if (hasShadowRoot(n)) {\r\n                            this.shadowDomManager.addShadowRoot(n.shadowRoot, this.doc);\r\n                        }\r\n                    },\r\n                    onIframeLoad: (iframe, childSn) => {\r\n                        this.iframeManager.attachIframe(iframe, childSn);\r\n                        this.shadowDomManager.observeAttachShadow(iframe);\r\n                    },\r\n                    onStylesheetLoad: (link, childSn) => {\r\n                        this.stylesheetManager.attachLinkElement(link, childSn);\r\n                    },\r\n                });\r\n                if (sn) {\r\n                    adds.push({\r\n                        parentId,\r\n                        nextId,\r\n                        node: sn,\r\n                    });\r\n                }\r\n            };\r\n            while (this.mapRemoves.length) {\r\n                this.mirror.removeNodeFromMap(this.mapRemoves.shift());\r\n            }\r\n            for (const n of Array.from(this.movedSet.values())) {\r\n                if (isParentRemoved(this.removes, n, this.mirror) &&\r\n                    !this.movedSet.has(n.parentNode)) {\r\n                    continue;\r\n                }\r\n                pushAdd(n);\r\n            }\r\n            for (const n of Array.from(this.addedSet.values())) {\r\n                if (!isAncestorInSet(this.droppedSet, n) &&\r\n                    !isParentRemoved(this.removes, n, this.mirror)) {\r\n                    pushAdd(n);\r\n                }\r\n                else if (isAncestorInSet(this.movedSet, n)) {\r\n                    pushAdd(n);\r\n                }\r\n                else {\r\n                    this.droppedSet.add(n);\r\n                }\r\n            }\r\n            let candidate = null;\r\n            while (addList.length) {\r\n                let node = null;\r\n                if (candidate) {\r\n                    const parentId = this.mirror.getId(candidate.value.parentNode);\r\n                    const nextId = getNextId(candidate.value);\r\n                    if (parentId !== -1 && nextId !== -1) {\r\n                        node = candidate;\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    for (let index = addList.length - 1; index >= 0; index--) {\r\n                        const _node = addList.get(index);\r\n                        if (_node) {\r\n                            const parentId = this.mirror.getId(_node.value.parentNode);\r\n                            const nextId = getNextId(_node.value);\r\n                            if (nextId === -1)\r\n                                continue;\r\n                            else if (parentId !== -1) {\r\n                                node = _node;\r\n                                break;\r\n                            }\r\n                            else {\r\n                                const unhandledNode = _node.value;\r\n                                if (unhandledNode.parentNode &&\r\n                                    unhandledNode.parentNode.nodeType ===\r\n                                        Node.DOCUMENT_FRAGMENT_NODE) {\r\n                                    const shadowHost = unhandledNode.parentNode\r\n                                        .host;\r\n                                    const parentId = this.mirror.getId(shadowHost);\r\n                                    if (parentId !== -1) {\r\n                                        node = _node;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    while (addList.head) {\r\n                        addList.removeNode(addList.head.value);\r\n                    }\r\n                    break;\r\n                }\r\n                candidate = node.previous;\r\n                addList.removeNode(node.value);\r\n                pushAdd(node.value);\r\n            }\r\n            const payload = {\r\n                texts: this.texts\r\n                    .map((text) => ({\r\n                    id: this.mirror.getId(text.node),\r\n                    value: text.value,\r\n                }))\r\n                    .filter((text) => this.mirror.has(text.id)),\r\n                attributes: this.attributes\r\n                    .map((attribute) => ({\r\n                    id: this.mirror.getId(attribute.node),\r\n                    attributes: attribute.attributes,\r\n                }))\r\n                    .filter((attribute) => this.mirror.has(attribute.id)),\r\n                removes: this.removes,\r\n                adds,\r\n            };\r\n            if (!payload.texts.length &&\r\n                !payload.attributes.length &&\r\n                !payload.removes.length &&\r\n                !payload.adds.length) {\r\n                return;\r\n            }\r\n            this.texts = [];\r\n            this.attributes = [];\r\n            this.removes = [];\r\n            this.addedSet = new Set();\r\n            this.movedSet = new Set();\r\n            this.droppedSet = new Set();\r\n            this.movedMap = {};\r\n            this.mutationCb(payload);\r\n        };\r\n        this.processMutation = (m) => {\r\n            if (isIgnored(m.target, this.mirror)) {\r\n                return;\r\n            }\r\n            switch (m.type) {\r\n                case 'characterData': {\r\n                    const value = m.target.textContent;\r\n                    if (!isBlocked(m.target, this.blockClass, this.blockSelector, false) &&\r\n                        value !== m.oldValue) {\r\n                        this.texts.push({\r\n                            value: needMaskingText(m.target, this.maskTextClass, this.maskTextSelector) && value\r\n                                ? this.maskTextFn\r\n                                    ? this.maskTextFn(value)\r\n                                    : value.replace(/[\\S]/g, '*')\r\n                                : value,\r\n                            node: m.target,\r\n                        });\r\n                    }\r\n                    break;\r\n                }\r\n                case 'attributes': {\r\n                    const target = m.target;\r\n                    let value = m.target.getAttribute(m.attributeName);\r\n                    if (m.attributeName === 'value') {\r\n                        value = maskInputValue({\r\n                            maskInputOptions: this.maskInputOptions,\r\n                            tagName: m.target.tagName,\r\n                            type: m.target.getAttribute('type'),\r\n                            value,\r\n                            maskInputFn: this.maskInputFn,\r\n                        });\r\n                    }\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                        value === m.oldValue) {\r\n                        return;\r\n                    }\r\n                    let item = this.attributes.find((a) => a.node === m.target);\r\n                    if (target.tagName === 'IFRAME' &&\r\n                        m.attributeName === 'src' &&\r\n                        !this.keepIframeSrcFn(value)) {\r\n                        if (!target.contentDocument) {\r\n                            m.attributeName = 'rr_src';\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (!item) {\r\n                        item = {\r\n                            node: m.target,\r\n                            attributes: {},\r\n                        };\r\n                        this.attributes.push(item);\r\n                    }\r\n                    if (m.attributeName === 'style') {\r\n                        const old = this.doc.createElement('span');\r\n                        if (m.oldValue) {\r\n                            old.setAttribute('style', m.oldValue);\r\n                        }\r\n                        if (item.attributes.style === undefined ||\r\n                            item.attributes.style === null) {\r\n                            item.attributes.style = {};\r\n                        }\r\n                        const styleObj = item.attributes.style;\r\n                        for (const pname of Array.from(target.style)) {\r\n                            const newValue = target.style.getPropertyValue(pname);\r\n                            const newPriority = target.style.getPropertyPriority(pname);\r\n                            if (newValue !== old.style.getPropertyValue(pname) ||\r\n                                newPriority !== old.style.getPropertyPriority(pname)) {\r\n                                if (newPriority === '') {\r\n                                    styleObj[pname] = newValue;\r\n                                }\r\n                                else {\r\n                                    styleObj[pname] = [newValue, newPriority];\r\n                                }\r\n                            }\r\n                        }\r\n                        for (const pname of Array.from(old.style)) {\r\n                            if (target.style.getPropertyValue(pname) === '') {\r\n                                styleObj[pname] = false;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        item.attributes[m.attributeName] = transformAttribute(this.doc, target.tagName, m.attributeName, value);\r\n                    }\r\n                    break;\r\n                }\r\n                case 'childList': {\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, true))\r\n                        return;\r\n                    m.addedNodes.forEach((n) => this.genAdds(n, m.target));\r\n                    m.removedNodes.forEach((n) => {\r\n                        const nodeId = this.mirror.getId(n);\r\n                        const parentId = isShadowRoot(m.target)\r\n                            ? this.mirror.getId(m.target.host)\r\n                            : this.mirror.getId(m.target);\r\n                        if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                            isIgnored(n, this.mirror) ||\r\n                            !isSerialized(n, this.mirror)) {\r\n                            return;\r\n                        }\r\n                        if (this.addedSet.has(n)) {\r\n                            deepDelete(this.addedSet, n);\r\n                            this.droppedSet.add(n);\r\n                        }\r\n                        else if (this.addedSet.has(m.target) && nodeId === -1) ;\r\n                        else if (isAncestorRemoved(m.target, this.mirror)) ;\r\n                        else if (this.movedSet.has(n) &&\r\n                            this.movedMap[moveKey(nodeId, parentId)]) {\r\n                            deepDelete(this.movedSet, n);\r\n                        }\r\n                        else {\r\n                            this.removes.push({\r\n                                parentId,\r\n                                id: nodeId,\r\n                                isShadow: isShadowRoot(m.target) && isNativeShadowDom(m.target)\r\n                                    ? true\r\n                                    : undefined,\r\n                            });\r\n                        }\r\n                        this.mapRemoves.push(n);\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        this.genAdds = (n, target) => {\r\n            if (this.mirror.hasNode(n)) {\r\n                if (isIgnored(n, this.mirror)) {\r\n                    return;\r\n                }\r\n                this.movedSet.add(n);\r\n                let targetId = null;\r\n                if (target && this.mirror.hasNode(target)) {\r\n                    targetId = this.mirror.getId(target);\r\n                }\r\n                if (targetId && targetId !== -1) {\r\n                    this.movedMap[moveKey(this.mirror.getId(n), targetId)] = true;\r\n                }\r\n            }\r\n            else {\r\n                this.addedSet.add(n);\r\n                this.droppedSet.delete(n);\r\n            }\r\n            if (!isBlocked(n, this.blockClass, this.blockSelector, false))\r\n                n.childNodes.forEach((childN) => this.genAdds(childN));\r\n        };\r\n    }\r\n    init(options) {\r\n        [\r\n            'mutationCb',\r\n            'blockClass',\r\n            'blockSelector',\r\n            'maskTextClass',\r\n            'maskTextSelector',\r\n            'inlineStylesheet',\r\n            'maskInputOptions',\r\n            'maskTextFn',\r\n            'maskInputFn',\r\n            'keepIframeSrcFn',\r\n            'recordCanvas',\r\n            'inlineImages',\r\n            'slimDOMOptions',\r\n            'dataURLOptions',\r\n            'doc',\r\n            'mirror',\r\n            'iframeManager',\r\n            'stylesheetManager',\r\n            'shadowDomManager',\r\n            'canvasManager',\r\n        ].forEach((key) => {\r\n            this[key] = options[key];\r\n        });\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n        this.canvasManager.freeze();\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n        this.canvasManager.unfreeze();\r\n        this.emit();\r\n    }\r\n    isFrozen() {\r\n        return this.frozen;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n        this.canvasManager.lock();\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n        this.canvasManager.unlock();\r\n        this.emit();\r\n    }\r\n    reset() {\r\n        this.shadowDomManager.reset();\r\n        this.canvasManager.reset();\r\n    }\r\n}\r\nfunction deepDelete(addsSet, n) {\r\n    addsSet.delete(n);\r\n    n.childNodes.forEach((childN) => deepDelete(addsSet, childN));\r\n}\r\nfunction isParentRemoved(removes, n, mirror) {\r\n    if (removes.length === 0)\r\n        return false;\r\n    return _isParentRemoved(removes, n, mirror);\r\n}\r\nfunction _isParentRemoved(removes, n, mirror) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    const parentId = mirror.getId(parentNode);\r\n    if (removes.some((r) => r.id === parentId)) {\r\n        return true;\r\n    }\r\n    return _isParentRemoved(removes, parentNode, mirror);\r\n}\r\nfunction isAncestorInSet(set, n) {\r\n    if (set.size === 0)\r\n        return false;\r\n    return _isAncestorInSet(set, n);\r\n}\r\nfunction _isAncestorInSet(set, n) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    if (set.has(parentNode)) {\r\n        return true;\r\n    }\r\n    return _isAncestorInSet(set, parentNode);\r\n}\n\nexport { MutationBuffer as default };\n","import { maskInputValue } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { on, throttle, isBlocked, getWindowHeight, getWindowWidth, hookSetter, patch, isTouchEvent } from '../utils.js';\nimport { MouseInteractions, IncrementalSource } from '../../../types/dist/types.js';\nimport MutationBuffer from './mutation.js';\n\nconst mutationBuffers = [];\r\nconst isCSSGroupingRuleSupported = typeof CSSGroupingRule !== 'undefined';\r\nconst isCSSMediaRuleSupported = typeof CSSMediaRule !== 'undefined';\r\nconst isCSSSupportsRuleSupported = typeof CSSSupportsRule !== 'undefined';\r\nconst isCSSConditionRuleSupported = typeof CSSConditionRule !== 'undefined';\r\nfunction getEventTarget(event) {\r\n    try {\r\n        if ('composedPath' in event) {\r\n            const path = event.composedPath();\r\n            if (path.length) {\r\n                return path[0];\r\n            }\r\n        }\r\n        else if ('path' in event && event.path.length) {\r\n            return event.path[0];\r\n        }\r\n        return event.target;\r\n    }\r\n    catch (_a) {\r\n        return event.target;\r\n    }\r\n}\r\nfunction initMutationObserver(options, rootEl) {\r\n    var _a, _b;\r\n    const mutationBuffer = new MutationBuffer();\r\n    mutationBuffers.push(mutationBuffer);\r\n    mutationBuffer.init(options);\r\n    let mutationObserverCtor = window.MutationObserver ||\r\n        window.__rrMutationObserver;\r\n    const angularZoneSymbol = (_b = (_a = window === null || window === void 0 ? void 0 : window.Zone) === null || _a === void 0 ? void 0 : _a.__symbol__) === null || _b === void 0 ? void 0 : _b.call(_a, 'MutationObserver');\r\n    if (angularZoneSymbol &&\r\n        window[angularZoneSymbol]) {\r\n        mutationObserverCtor = window[angularZoneSymbol];\r\n    }\r\n    const observer = new mutationObserverCtor(mutationBuffer.processMutations.bind(mutationBuffer));\r\n    observer.observe(rootEl, {\r\n        attributes: true,\r\n        attributeOldValue: true,\r\n        characterData: true,\r\n        characterDataOldValue: true,\r\n        childList: true,\r\n        subtree: true,\r\n    });\r\n    return observer;\r\n}\r\nfunction initMoveObserver({ mousemoveCb, sampling, doc, mirror, }) {\r\n    if (sampling.mousemove === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\r\n    const callbackThreshold = typeof sampling.mousemoveCallback === 'number'\r\n        ? sampling.mousemoveCallback\r\n        : 500;\r\n    let positions = [];\r\n    let timeBaseline;\r\n    const wrappedCb = throttle((source) => {\r\n        const totalOffset = Date.now() - timeBaseline;\r\n        mousemoveCb(positions.map((p) => {\r\n            p.timeOffset -= totalOffset;\r\n            return p;\r\n        }), source);\r\n        positions = [];\r\n        timeBaseline = null;\r\n    }, callbackThreshold);\r\n    const updatePosition = throttle((evt) => {\r\n        const target = getEventTarget(evt);\r\n        const { clientX, clientY } = isTouchEvent(evt)\r\n            ? evt.changedTouches[0]\r\n            : evt;\r\n        if (!timeBaseline) {\r\n            timeBaseline = Date.now();\r\n        }\r\n        positions.push({\r\n            x: clientX,\r\n            y: clientY,\r\n            id: mirror.getId(target),\r\n            timeOffset: Date.now() - timeBaseline,\r\n        });\r\n        wrappedCb(typeof DragEvent !== 'undefined' && evt instanceof DragEvent\r\n            ? IncrementalSource.Drag\r\n            : evt instanceof MouseEvent\r\n                ? IncrementalSource.MouseMove\r\n                : IncrementalSource.TouchMove);\r\n    }, threshold, {\r\n        trailing: false,\r\n    });\r\n    const handlers = [\r\n        on('mousemove', updatePosition, doc),\r\n        on('touchmove', updatePosition, doc),\r\n        on('drag', updatePosition, doc),\r\n    ];\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initMouseInteractionObserver({ mouseInteractionCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    if (sampling.mouseInteraction === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const disableMap = sampling.mouseInteraction === true ||\r\n        sampling.mouseInteraction === undefined\r\n        ? {}\r\n        : sampling.mouseInteraction;\r\n    const handlers = [];\r\n    const getHandler = (eventKey) => {\r\n        return (event) => {\r\n            const target = getEventTarget(event);\r\n            if (isBlocked(target, blockClass, blockSelector, true)) {\r\n                return;\r\n            }\r\n            const e = isTouchEvent(event) ? event.changedTouches[0] : event;\r\n            if (!e) {\r\n                return;\r\n            }\r\n            const id = mirror.getId(target);\r\n            const { clientX, clientY } = e;\r\n            mouseInteractionCb({\r\n                type: MouseInteractions[eventKey],\r\n                id,\r\n                x: clientX,\r\n                y: clientY,\r\n            });\r\n        };\r\n    };\r\n    Object.keys(MouseInteractions)\r\n        .filter((key) => Number.isNaN(Number(key)) &&\r\n        !key.endsWith('_Departed') &&\r\n        disableMap[key] !== false)\r\n        .forEach((eventKey) => {\r\n        const eventName = eventKey.toLowerCase();\r\n        const handler = getHandler(eventKey);\r\n        handlers.push(on(eventName, handler, doc));\r\n    });\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initScrollObserver({ scrollCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    const updatePosition = throttle((evt) => {\r\n        const target = getEventTarget(evt);\r\n        if (!target || isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const id = mirror.getId(target);\r\n        if (target === doc) {\r\n            const scrollEl = (doc.scrollingElement || doc.documentElement);\r\n            scrollCb({\r\n                id,\r\n                x: scrollEl.scrollLeft,\r\n                y: scrollEl.scrollTop,\r\n            });\r\n        }\r\n        else {\r\n            scrollCb({\r\n                id,\r\n                x: target.scrollLeft,\r\n                y: target.scrollTop,\r\n            });\r\n        }\r\n    }, sampling.scroll || 100);\r\n    return on('scroll', updatePosition, doc);\r\n}\r\nfunction initViewportResizeObserver({ viewportResizeCb, }) {\r\n    let lastH = -1;\r\n    let lastW = -1;\r\n    const updateDimension = throttle(() => {\r\n        const height = getWindowHeight();\r\n        const width = getWindowWidth();\r\n        if (lastH !== height || lastW !== width) {\r\n            viewportResizeCb({\r\n                width: Number(width),\r\n                height: Number(height),\r\n            });\r\n            lastH = height;\r\n            lastW = width;\r\n        }\r\n    }, 200);\r\n    return on('resize', updateDimension, window);\r\n}\r\nfunction wrapEventWithUserTriggeredFlag(v, enable) {\r\n    const value = Object.assign({}, v);\r\n    if (!enable)\r\n        delete value.userTriggered;\r\n    return value;\r\n}\r\nconst INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\r\nconst lastInputValueMap = new WeakMap();\r\nfunction initInputObserver({ inputCb, doc, mirror, blockClass, blockSelector, ignoreClass, maskInputOptions, maskInputFn, sampling, userTriggeredOnInput, }) {\r\n    function eventHandler(event) {\r\n        let target = getEventTarget(event);\r\n        const userTriggered = event.isTrusted;\r\n        if (target && target.tagName === 'OPTION')\r\n            target = target.parentElement;\r\n        if (!target ||\r\n            !target.tagName ||\r\n            INPUT_TAGS.indexOf(target.tagName) < 0 ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const type = target.type;\r\n        if (target.classList.contains(ignoreClass)) {\r\n            return;\r\n        }\r\n        let text = target.value;\r\n        let isChecked = false;\r\n        if (type === 'radio' || type === 'checkbox') {\r\n            isChecked = target.checked;\r\n        }\r\n        else if (maskInputOptions[target.tagName.toLowerCase()] ||\r\n            maskInputOptions[type]) {\r\n            text = maskInputValue({\r\n                maskInputOptions,\r\n                tagName: target.tagName,\r\n                type,\r\n                value: text,\r\n                maskInputFn,\r\n            });\r\n        }\r\n        cbWithDedup(target, wrapEventWithUserTriggeredFlag({ text, isChecked, userTriggered }, userTriggeredOnInput));\r\n        const name = target.name;\r\n        if (type === 'radio' && name && isChecked) {\r\n            doc\r\n                .querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`)\r\n                .forEach((el) => {\r\n                if (el !== target) {\r\n                    cbWithDedup(el, wrapEventWithUserTriggeredFlag({\r\n                        text: el.value,\r\n                        isChecked: !isChecked,\r\n                        userTriggered: false,\r\n                    }, userTriggeredOnInput));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function cbWithDedup(target, v) {\r\n        const lastInputValue = lastInputValueMap.get(target);\r\n        if (!lastInputValue ||\r\n            lastInputValue.text !== v.text ||\r\n            lastInputValue.isChecked !== v.isChecked) {\r\n            lastInputValueMap.set(target, v);\r\n            const id = mirror.getId(target);\r\n            inputCb(Object.assign(Object.assign({}, v), { id }));\r\n        }\r\n    }\r\n    const events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\r\n    const handlers = events.map((eventName) => on(eventName, eventHandler, doc));\r\n    const currentWindow = doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n        };\r\n    }\r\n    const propertyDescriptor = currentWindow.Object.getOwnPropertyDescriptor(currentWindow.HTMLInputElement.prototype, 'value');\r\n    const hookProperties = [\r\n        [currentWindow.HTMLInputElement.prototype, 'value'],\r\n        [currentWindow.HTMLInputElement.prototype, 'checked'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'value'],\r\n        [currentWindow.HTMLTextAreaElement.prototype, 'value'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'selectedIndex'],\r\n        [currentWindow.HTMLOptionElement.prototype, 'selected'],\r\n    ];\r\n    if (propertyDescriptor && propertyDescriptor.set) {\r\n        handlers.push(...hookProperties.map((p) => hookSetter(p[0], p[1], {\r\n            set() {\r\n                eventHandler({ target: this });\r\n            },\r\n        }, false, currentWindow)));\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction getNestedCSSRulePositions(rule) {\r\n    const positions = [];\r\n    function recurse(childRule, pos) {\r\n        if ((isCSSGroupingRuleSupported &&\r\n            childRule.parentRule instanceof CSSGroupingRule) ||\r\n            (isCSSMediaRuleSupported &&\r\n                childRule.parentRule instanceof CSSMediaRule) ||\r\n            (isCSSSupportsRuleSupported &&\r\n                childRule.parentRule instanceof CSSSupportsRule) ||\r\n            (isCSSConditionRuleSupported &&\r\n                childRule.parentRule instanceof CSSConditionRule)) {\r\n            const rules = Array.from(childRule.parentRule.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        else if (childRule.parentStyleSheet) {\r\n            const rules = Array.from(childRule.parentStyleSheet.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        return pos;\r\n    }\r\n    return recurse(rule, positions);\r\n}\r\nfunction getIdAndStyleId(sheet, mirror, styleMirror) {\r\n    let id, styleId;\r\n    if (!sheet)\r\n        return {};\r\n    if (sheet.ownerNode)\r\n        id = mirror.getId(sheet.ownerNode);\r\n    else\r\n        styleId = styleMirror.getId(sheet);\r\n    return {\r\n        styleId,\r\n        id,\r\n    };\r\n}\r\nfunction initStyleSheetObserver({ styleSheetRuleCb, mirror, stylesheetManager }, { win }) {\r\n    const insertRule = win.CSSStyleSheet.prototype.insertRule;\r\n    win.CSSStyleSheet.prototype.insertRule = function (rule, index) {\r\n        const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleSheetRuleCb({\r\n                id,\r\n                styleId,\r\n                adds: [{ rule, index }],\r\n            });\r\n        }\r\n        return insertRule.apply(this, [rule, index]);\r\n    };\r\n    const deleteRule = win.CSSStyleSheet.prototype.deleteRule;\r\n    win.CSSStyleSheet.prototype.deleteRule = function (index) {\r\n        const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleSheetRuleCb({\r\n                id,\r\n                styleId,\r\n                removes: [{ index }],\r\n            });\r\n        }\r\n        return deleteRule.apply(this, [index]);\r\n    };\r\n    let replace;\r\n    if (win.CSSStyleSheet.prototype.replace) {\r\n        replace = win.CSSStyleSheet.prototype.replace;\r\n        win.CSSStyleSheet.prototype.replace = function (text) {\r\n            const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    replace: text,\r\n                });\r\n            }\r\n            return replace.apply(this, [text]);\r\n        };\r\n    }\r\n    let replaceSync;\r\n    if (win.CSSStyleSheet.prototype.replaceSync) {\r\n        replaceSync = win.CSSStyleSheet.prototype.replaceSync;\r\n        win.CSSStyleSheet.prototype.replaceSync = function (text) {\r\n            const { id, styleId } = getIdAndStyleId(this, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    replaceSync: text,\r\n                });\r\n            }\r\n            return replaceSync.apply(this, [text]);\r\n        };\r\n    }\r\n    const supportedNestedCSSRuleTypes = {};\r\n    if (isCSSGroupingRuleSupported) {\r\n        supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\r\n    }\r\n    else {\r\n        if (isCSSMediaRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\r\n        }\r\n        if (isCSSConditionRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\r\n        }\r\n        if (isCSSSupportsRuleSupported) {\r\n            supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\r\n        }\r\n    }\r\n    const unmodifiedFunctions = {};\r\n    Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n        unmodifiedFunctions[typeKey] = {\r\n            insertRule: type.prototype.insertRule,\r\n            deleteRule: type.prototype.deleteRule,\r\n        };\r\n        type.prototype.insertRule = function (rule, index) {\r\n            const { id, styleId } = getIdAndStyleId(this.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    adds: [\r\n                        {\r\n                            rule,\r\n                            index: [\r\n                                ...getNestedCSSRulePositions(this),\r\n                                index || 0,\r\n                            ],\r\n                        },\r\n                    ],\r\n                });\r\n            }\r\n            return unmodifiedFunctions[typeKey].insertRule.apply(this, [rule, index]);\r\n        };\r\n        type.prototype.deleteRule = function (index) {\r\n            const { id, styleId } = getIdAndStyleId(this.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    removes: [\r\n                        { index: [...getNestedCSSRulePositions(this), index] },\r\n                    ],\r\n                });\r\n            }\r\n            return unmodifiedFunctions[typeKey].deleteRule.apply(this, [index]);\r\n        };\r\n    });\r\n    return () => {\r\n        win.CSSStyleSheet.prototype.insertRule = insertRule;\r\n        win.CSSStyleSheet.prototype.deleteRule = deleteRule;\r\n        replace && (win.CSSStyleSheet.prototype.replace = replace);\r\n        replaceSync && (win.CSSStyleSheet.prototype.replaceSync = replaceSync);\r\n        Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n            type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\r\n            type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\r\n        });\r\n    };\r\n}\r\nfunction initAdoptedStyleSheetObserver({ mirror, stylesheetManager, }, host) {\r\n    var _a, _b, _c;\r\n    let hostId = null;\r\n    if (host.nodeName === '#document')\r\n        hostId = mirror.getId(host);\r\n    else\r\n        hostId = mirror.getId(host.host);\r\n    const patchTarget = host.nodeName === '#document'\r\n        ? (_a = host.defaultView) === null || _a === void 0 ? void 0 : _a.Document\r\n        : (_c = (_b = host.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView) === null || _c === void 0 ? void 0 : _c.ShadowRoot;\r\n    const originalPropertyDescriptor = Object.getOwnPropertyDescriptor(patchTarget === null || patchTarget === void 0 ? void 0 : patchTarget.prototype, 'adoptedStyleSheets');\r\n    if (hostId === null ||\r\n        hostId === -1 ||\r\n        !patchTarget ||\r\n        !originalPropertyDescriptor)\r\n        return () => {\r\n        };\r\n    Object.defineProperty(host, 'adoptedStyleSheets', {\r\n        configurable: originalPropertyDescriptor.configurable,\r\n        enumerable: originalPropertyDescriptor.enumerable,\r\n        get() {\r\n            var _a;\r\n            return (_a = originalPropertyDescriptor.get) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        },\r\n        set(sheets) {\r\n            var _a;\r\n            const result = (_a = originalPropertyDescriptor.set) === null || _a === void 0 ? void 0 : _a.call(this, sheets);\r\n            if (hostId !== null && hostId !== -1) {\r\n                try {\r\n                    stylesheetManager.adoptStyleSheets(sheets, hostId);\r\n                }\r\n                catch (e) {\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n    });\r\n    return () => {\r\n        Object.defineProperty(host, 'adoptedStyleSheets', {\r\n            configurable: originalPropertyDescriptor.configurable,\r\n            enumerable: originalPropertyDescriptor.enumerable,\r\n            get: originalPropertyDescriptor.get,\r\n            set: originalPropertyDescriptor.set,\r\n        });\r\n    };\r\n}\r\nfunction initStyleDeclarationObserver({ styleDeclarationCb, mirror, ignoreCSSAttributes, stylesheetManager, }, { win }) {\r\n    const setProperty = win.CSSStyleDeclaration.prototype.setProperty;\r\n    win.CSSStyleDeclaration.prototype.setProperty = function (property, value, priority) {\r\n        var _a;\r\n        if (ignoreCSSAttributes.has(property)) {\r\n            return setProperty.apply(this, [property, value, priority]);\r\n        }\r\n        const { id, styleId } = getIdAndStyleId((_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleDeclarationCb({\r\n                id,\r\n                styleId,\r\n                set: {\r\n                    property,\r\n                    value,\r\n                    priority,\r\n                },\r\n                index: getNestedCSSRulePositions(this.parentRule),\r\n            });\r\n        }\r\n        return setProperty.apply(this, [property, value, priority]);\r\n    };\r\n    const removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\r\n    win.CSSStyleDeclaration.prototype.removeProperty = function (property) {\r\n        var _a;\r\n        if (ignoreCSSAttributes.has(property)) {\r\n            return removeProperty.apply(this, [property]);\r\n        }\r\n        const { id, styleId } = getIdAndStyleId((_a = this.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n        if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n            styleDeclarationCb({\r\n                id,\r\n                styleId,\r\n                remove: {\r\n                    property,\r\n                },\r\n                index: getNestedCSSRulePositions(this.parentRule),\r\n            });\r\n        }\r\n        return removeProperty.apply(this, [property]);\r\n    };\r\n    return () => {\r\n        win.CSSStyleDeclaration.prototype.setProperty = setProperty;\r\n        win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\r\n    };\r\n}\r\nfunction initMediaInteractionObserver({ mediaInteractionCb, blockClass, blockSelector, mirror, sampling, }) {\r\n    const handler = (type) => throttle((event) => {\r\n        const target = getEventTarget(event);\r\n        if (!target ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const { currentTime, volume, muted, playbackRate, } = target;\r\n        mediaInteractionCb({\r\n            type,\r\n            id: mirror.getId(target),\r\n            currentTime,\r\n            volume,\r\n            muted,\r\n            playbackRate,\r\n        });\r\n    }, sampling.media || 500);\r\n    const handlers = [\r\n        on('play', handler(0)),\r\n        on('pause', handler(1)),\r\n        on('seeked', handler(2)),\r\n        on('volumechange', handler(3)),\r\n        on('ratechange', handler(4)),\r\n    ];\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initFontObserver({ fontCb, doc }) {\r\n    const win = doc.defaultView;\r\n    if (!win) {\r\n        return () => {\r\n        };\r\n    }\r\n    const handlers = [];\r\n    const fontMap = new WeakMap();\r\n    const originalFontFace = win.FontFace;\r\n    win.FontFace = function FontFace(family, source, descriptors) {\r\n        const fontFace = new originalFontFace(family, source, descriptors);\r\n        fontMap.set(fontFace, {\r\n            family,\r\n            buffer: typeof source !== 'string',\r\n            descriptors,\r\n            fontSource: typeof source === 'string'\r\n                ? source\r\n                : JSON.stringify(Array.from(new Uint8Array(source))),\r\n        });\r\n        return fontFace;\r\n    };\r\n    const restoreHandler = patch(doc.fonts, 'add', function (original) {\r\n        return function (fontFace) {\r\n            setTimeout(() => {\r\n                const p = fontMap.get(fontFace);\r\n                if (p) {\r\n                    fontCb(p);\r\n                    fontMap.delete(fontFace);\r\n                }\r\n            }, 0);\r\n            return original.apply(this, [fontFace]);\r\n        };\r\n    });\r\n    handlers.push(() => {\r\n        win.FontFace = originalFontFace;\r\n    });\r\n    handlers.push(restoreHandler);\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\r\nfunction initSelectionObserver(param) {\r\n    const { doc, mirror, blockClass, blockSelector, selectionCb } = param;\r\n    let collapsed = true;\r\n    const updateSelection = () => {\r\n        const selection = doc.getSelection();\r\n        if (!selection || (collapsed && (selection === null || selection === void 0 ? void 0 : selection.isCollapsed)))\r\n            return;\r\n        collapsed = selection.isCollapsed || false;\r\n        const ranges = [];\r\n        const count = selection.rangeCount || 0;\r\n        for (let i = 0; i < count; i++) {\r\n            const range = selection.getRangeAt(i);\r\n            const { startContainer, startOffset, endContainer, endOffset } = range;\r\n            const blocked = isBlocked(startContainer, blockClass, blockSelector, true) ||\r\n                isBlocked(endContainer, blockClass, blockSelector, true);\r\n            if (blocked)\r\n                continue;\r\n            ranges.push({\r\n                start: mirror.getId(startContainer),\r\n                startOffset,\r\n                end: mirror.getId(endContainer),\r\n                endOffset,\r\n            });\r\n        }\r\n        selectionCb({ ranges });\r\n    };\r\n    updateSelection();\r\n    return on('selectionchange', updateSelection);\r\n}\r\nfunction mergeHooks(o, hooks) {\r\n    const { mutationCb, mousemoveCb, mouseInteractionCb, scrollCb, viewportResizeCb, inputCb, mediaInteractionCb, styleSheetRuleCb, styleDeclarationCb, canvasMutationCb, fontCb, selectionCb, } = o;\r\n    o.mutationCb = (...p) => {\r\n        if (hooks.mutation) {\r\n            hooks.mutation(...p);\r\n        }\r\n        mutationCb(...p);\r\n    };\r\n    o.mousemoveCb = (...p) => {\r\n        if (hooks.mousemove) {\r\n            hooks.mousemove(...p);\r\n        }\r\n        mousemoveCb(...p);\r\n    };\r\n    o.mouseInteractionCb = (...p) => {\r\n        if (hooks.mouseInteraction) {\r\n            hooks.mouseInteraction(...p);\r\n        }\r\n        mouseInteractionCb(...p);\r\n    };\r\n    o.scrollCb = (...p) => {\r\n        if (hooks.scroll) {\r\n            hooks.scroll(...p);\r\n        }\r\n        scrollCb(...p);\r\n    };\r\n    o.viewportResizeCb = (...p) => {\r\n        if (hooks.viewportResize) {\r\n            hooks.viewportResize(...p);\r\n        }\r\n        viewportResizeCb(...p);\r\n    };\r\n    o.inputCb = (...p) => {\r\n        if (hooks.input) {\r\n            hooks.input(...p);\r\n        }\r\n        inputCb(...p);\r\n    };\r\n    o.mediaInteractionCb = (...p) => {\r\n        if (hooks.mediaInteaction) {\r\n            hooks.mediaInteaction(...p);\r\n        }\r\n        mediaInteractionCb(...p);\r\n    };\r\n    o.styleSheetRuleCb = (...p) => {\r\n        if (hooks.styleSheetRule) {\r\n            hooks.styleSheetRule(...p);\r\n        }\r\n        styleSheetRuleCb(...p);\r\n    };\r\n    o.styleDeclarationCb = (...p) => {\r\n        if (hooks.styleDeclaration) {\r\n            hooks.styleDeclaration(...p);\r\n        }\r\n        styleDeclarationCb(...p);\r\n    };\r\n    o.canvasMutationCb = (...p) => {\r\n        if (hooks.canvasMutation) {\r\n            hooks.canvasMutation(...p);\r\n        }\r\n        canvasMutationCb(...p);\r\n    };\r\n    o.fontCb = (...p) => {\r\n        if (hooks.font) {\r\n            hooks.font(...p);\r\n        }\r\n        fontCb(...p);\r\n    };\r\n    o.selectionCb = (...p) => {\r\n        if (hooks.selection) {\r\n            hooks.selection(...p);\r\n        }\r\n        selectionCb(...p);\r\n    };\r\n}\r\nfunction initObservers(o, hooks = {}) {\r\n    const currentWindow = o.doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n        };\r\n    }\r\n    mergeHooks(o, hooks);\r\n    const mutationObserver = initMutationObserver(o, o.doc);\r\n    const mousemoveHandler = initMoveObserver(o);\r\n    const mouseInteractionHandler = initMouseInteractionObserver(o);\r\n    const scrollHandler = initScrollObserver(o);\r\n    const viewportResizeHandler = initViewportResizeObserver(o);\r\n    const inputHandler = initInputObserver(o);\r\n    const mediaInteractionHandler = initMediaInteractionObserver(o);\r\n    const styleSheetObserver = initStyleSheetObserver(o, { win: currentWindow });\r\n    const adoptedStyleSheetObserver = initAdoptedStyleSheetObserver(o, o.doc);\r\n    const styleDeclarationObserver = initStyleDeclarationObserver(o, {\r\n        win: currentWindow,\r\n    });\r\n    const fontObserver = o.collectFonts\r\n        ? initFontObserver(o)\r\n        : () => {\r\n        };\r\n    const selectionObserver = initSelectionObserver(o);\r\n    const pluginHandlers = [];\r\n    for (const plugin of o.plugins) {\r\n        pluginHandlers.push(plugin.observer(plugin.callback, currentWindow, plugin.options));\r\n    }\r\n    return () => {\r\n        mutationBuffers.forEach((b) => b.reset());\r\n        mutationObserver.disconnect();\r\n        mousemoveHandler();\r\n        mouseInteractionHandler();\r\n        scrollHandler();\r\n        viewportResizeHandler();\r\n        inputHandler();\r\n        mediaInteractionHandler();\r\n        styleSheetObserver();\r\n        adoptedStyleSheetObserver();\r\n        styleDeclarationObserver();\r\n        fontObserver();\r\n        selectionObserver();\r\n        pluginHandlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { INPUT_TAGS, initAdoptedStyleSheetObserver, initMutationObserver, initObservers, initScrollObserver, mutationBuffers };\n","class CrossOriginIframeMirror {\r\n    constructor(generateIdFn) {\r\n        this.generateIdFn = generateIdFn;\r\n        this.iframeIdToRemoteIdMap = new WeakMap();\r\n        this.iframeRemoteIdToIdMap = new WeakMap();\r\n    }\r\n    getId(iframe, remoteId, idToRemoteMap, remoteToIdMap) {\r\n        const idToRemoteIdMap = idToRemoteMap || this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = remoteToIdMap || this.getRemoteIdToIdMap(iframe);\r\n        let id = idToRemoteIdMap.get(remoteId);\r\n        if (!id) {\r\n            id = this.generateIdFn();\r\n            idToRemoteIdMap.set(remoteId, id);\r\n            remoteIdToIdMap.set(id, remoteId);\r\n        }\r\n        return id;\r\n    }\r\n    getIds(iframe, remoteId) {\r\n        const idToRemoteIdMap = this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return remoteId.map((id) => this.getId(iframe, id, idToRemoteIdMap, remoteIdToIdMap));\r\n    }\r\n    getRemoteId(iframe, id, map) {\r\n        const remoteIdToIdMap = map || this.getRemoteIdToIdMap(iframe);\r\n        if (typeof id !== 'number')\r\n            return id;\r\n        const remoteId = remoteIdToIdMap.get(id);\r\n        if (!remoteId)\r\n            return -1;\r\n        return remoteId;\r\n    }\r\n    getRemoteIds(iframe, ids) {\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return ids.map((id) => this.getRemoteId(iframe, id, remoteIdToIdMap));\r\n    }\r\n    reset(iframe) {\r\n        if (!iframe) {\r\n            this.iframeIdToRemoteIdMap = new WeakMap();\r\n            this.iframeRemoteIdToIdMap = new WeakMap();\r\n            return;\r\n        }\r\n        this.iframeIdToRemoteIdMap.delete(iframe);\r\n        this.iframeRemoteIdToIdMap.delete(iframe);\r\n    }\r\n    getIdToRemoteIdMap(iframe) {\r\n        let idToRemoteIdMap = this.iframeIdToRemoteIdMap.get(iframe);\r\n        if (!idToRemoteIdMap) {\r\n            idToRemoteIdMap = new Map();\r\n            this.iframeIdToRemoteIdMap.set(iframe, idToRemoteIdMap);\r\n        }\r\n        return idToRemoteIdMap;\r\n    }\r\n    getRemoteIdToIdMap(iframe) {\r\n        let remoteIdToIdMap = this.iframeRemoteIdToIdMap.get(iframe);\r\n        if (!remoteIdToIdMap) {\r\n            remoteIdToIdMap = new Map();\r\n            this.iframeRemoteIdToIdMap.set(iframe, remoteIdToIdMap);\r\n        }\r\n        return remoteIdToIdMap;\r\n    }\r\n}\n\nexport { CrossOriginIframeMirror as default };\n","import { genId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport CrossOriginIframeMirror from './cross-origin-iframe-mirror.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass IframeManager {\r\n    constructor(options) {\r\n        this.iframes = new WeakMap();\r\n        this.crossOriginIframeMap = new WeakMap();\r\n        this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);\r\n        this.mutationCb = options.mutationCb;\r\n        this.wrappedEmit = options.wrappedEmit;\r\n        this.stylesheetManager = options.stylesheetManager;\r\n        this.recordCrossOriginIframes = options.recordCrossOriginIframes;\r\n        this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));\r\n        this.mirror = options.mirror;\r\n        if (this.recordCrossOriginIframes) {\r\n            window.addEventListener('message', this.handleMessage.bind(this));\r\n        }\r\n    }\r\n    addIframe(iframeEl) {\r\n        this.iframes.set(iframeEl, true);\r\n        if (iframeEl.contentWindow)\r\n            this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\r\n    }\r\n    addLoadListener(cb) {\r\n        this.loadListener = cb;\r\n    }\r\n    attachIframe(iframeEl, childSn) {\r\n        var _a;\r\n        this.mutationCb({\r\n            adds: [\r\n                {\r\n                    parentId: this.mirror.getId(iframeEl),\r\n                    nextId: null,\r\n                    node: childSn,\r\n                },\r\n            ],\r\n            removes: [],\r\n            texts: [],\r\n            attributes: [],\r\n            isAttachIframe: true,\r\n        });\r\n        (_a = this.loadListener) === null || _a === void 0 ? void 0 : _a.call(this, iframeEl);\r\n        if (iframeEl.contentDocument &&\r\n            iframeEl.contentDocument.adoptedStyleSheets &&\r\n            iframeEl.contentDocument.adoptedStyleSheets.length > 0)\r\n            this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets, this.mirror.getId(iframeEl.contentDocument));\r\n    }\r\n    handleMessage(message) {\r\n        if (message.data.type === 'rrweb') {\r\n            const iframeSourceWindow = message.source;\r\n            if (!iframeSourceWindow)\r\n                return;\r\n            const iframeEl = this.crossOriginIframeMap.get(message.source);\r\n            if (!iframeEl)\r\n                return;\r\n            const transformedEvent = this.transformCrossOriginEvent(iframeEl, message.data.event);\r\n            if (transformedEvent)\r\n                this.wrappedEmit(transformedEvent, message.data.isCheckout);\r\n        }\r\n    }\r\n    transformCrossOriginEvent(iframeEl, e) {\r\n        var _a;\r\n        switch (e.type) {\r\n            case EventType.FullSnapshot: {\r\n                this.crossOriginIframeMirror.reset(iframeEl);\r\n                this.crossOriginIframeStyleMirror.reset(iframeEl);\r\n                this.replaceIdOnNode(e.data.node, iframeEl);\r\n                return {\r\n                    timestamp: e.timestamp,\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source: IncrementalSource.Mutation,\r\n                        adds: [\r\n                            {\r\n                                parentId: this.mirror.getId(iframeEl),\r\n                                nextId: null,\r\n                                node: e.data.node,\r\n                            },\r\n                        ],\r\n                        removes: [],\r\n                        texts: [],\r\n                        attributes: [],\r\n                        isAttachIframe: true,\r\n                    },\r\n                };\r\n            }\r\n            case EventType.Meta:\r\n            case EventType.Load:\r\n            case EventType.DomContentLoaded: {\r\n                return false;\r\n            }\r\n            case EventType.Plugin: {\r\n                return e;\r\n            }\r\n            case EventType.Custom: {\r\n                this.replaceIds(e.data.payload, iframeEl, ['id', 'parentId', 'previousId', 'nextId']);\r\n                return e;\r\n            }\r\n            case EventType.IncrementalSnapshot: {\r\n                switch (e.data.source) {\r\n                    case IncrementalSource.Mutation: {\r\n                        e.data.adds.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, [\r\n                                'parentId',\r\n                                'nextId',\r\n                                'previousId',\r\n                            ]);\r\n                            this.replaceIdOnNode(n.node, iframeEl);\r\n                        });\r\n                        e.data.removes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['parentId', 'id']);\r\n                        });\r\n                        e.data.attributes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        e.data.texts.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Drag:\r\n                    case IncrementalSource.TouchMove:\r\n                    case IncrementalSource.MouseMove: {\r\n                        e.data.positions.forEach((p) => {\r\n                            this.replaceIds(p, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.ViewportResize: {\r\n                        return false;\r\n                    }\r\n                    case IncrementalSource.MediaInteraction:\r\n                    case IncrementalSource.MouseInteraction:\r\n                    case IncrementalSource.Scroll:\r\n                    case IncrementalSource.CanvasMutation:\r\n                    case IncrementalSource.Input: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.StyleSheetRule:\r\n                    case IncrementalSource.StyleDeclaration: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleId']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Font: {\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Selection: {\r\n                        e.data.ranges.forEach((range) => {\r\n                            this.replaceIds(range, iframeEl, ['start', 'end']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.AdoptedStyleSheet: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleIds']);\r\n                        (_a = e.data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n                            this.replaceStyleIds(style, iframeEl, ['styleId']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    replace(iframeMirror, obj, iframeEl, keys) {\r\n        for (const key of keys) {\r\n            if (!Array.isArray(obj[key]) && typeof obj[key] !== 'number')\r\n                continue;\r\n            if (Array.isArray(obj[key])) {\r\n                obj[key] = iframeMirror.getIds(iframeEl, obj[key]);\r\n            }\r\n            else {\r\n                obj[key] = iframeMirror.getId(iframeEl, obj[key]);\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    replaceIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceStyleIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceIdOnNode(node, iframeEl) {\r\n        this.replaceIds(node, iframeEl, ['id']);\r\n        if ('childNodes' in node) {\r\n            node.childNodes.forEach((child) => {\r\n                this.replaceIdOnNode(child, iframeEl);\r\n            });\r\n        }\r\n    }\r\n}\n\nexport { IframeManager };\n","import { initMutationObserver, initScrollObserver, initAdoptedStyleSheetObserver } from './observer.js';\nimport { patch } from '../utils.js';\nimport { isNativeShadowDom } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nclass ShadowDomManager {\r\n    constructor(options) {\r\n        this.shadowDoms = new WeakSet();\r\n        this.restorePatches = [];\r\n        this.mutationCb = options.mutationCb;\r\n        this.scrollCb = options.scrollCb;\r\n        this.bypassOptions = options.bypassOptions;\r\n        this.mirror = options.mirror;\r\n        const manager = this;\r\n        this.restorePatches.push(patch(Element.prototype, 'attachShadow', function (original) {\r\n            return function (option) {\r\n                const shadowRoot = original.call(this, option);\r\n                if (this.shadowRoot)\r\n                    manager.addShadowRoot(this.shadowRoot, this.ownerDocument);\r\n                return shadowRoot;\r\n            };\r\n        }));\r\n    }\r\n    addShadowRoot(shadowRoot, doc) {\r\n        if (!isNativeShadowDom(shadowRoot))\r\n            return;\r\n        if (this.shadowDoms.has(shadowRoot))\r\n            return;\r\n        this.shadowDoms.add(shadowRoot);\r\n        initMutationObserver(Object.assign(Object.assign({}, this.bypassOptions), { doc, mutationCb: this.mutationCb, mirror: this.mirror, shadowDomManager: this }), shadowRoot);\r\n        initScrollObserver(Object.assign(Object.assign({}, this.bypassOptions), { scrollCb: this.scrollCb, doc: shadowRoot, mirror: this.mirror }));\r\n        setTimeout(() => {\r\n            if (shadowRoot.adoptedStyleSheets &&\r\n                shadowRoot.adoptedStyleSheets.length > 0)\r\n                this.bypassOptions.stylesheetManager.adoptStyleSheets(shadowRoot.adoptedStyleSheets, this.mirror.getId(shadowRoot.host));\r\n            initAdoptedStyleSheetObserver({\r\n                mirror: this.mirror,\r\n                stylesheetManager: this.bypassOptions.stylesheetManager,\r\n            }, shadowRoot);\r\n        }, 0);\r\n    }\r\n    observeAttachShadow(iframeElement) {\r\n        if (iframeElement.contentWindow) {\r\n            const manager = this;\r\n            this.restorePatches.push(patch(iframeElement.contentWindow.HTMLElement.prototype, 'attachShadow', function (original) {\r\n                return function (option) {\r\n                    const shadowRoot = original.call(this, option);\r\n                    if (this.shadowRoot)\r\n                        manager.addShadowRoot(this.shadowRoot, iframeElement.contentDocument);\r\n                    return shadowRoot;\r\n                };\r\n            }));\r\n        }\r\n    }\r\n    reset() {\r\n        this.restorePatches.forEach((restorePatch) => restorePatch());\r\n        this.shadowDoms = new WeakSet();\r\n    }\r\n}\n\nexport { ShadowDomManager };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nexport { __awaiter, __rest };\n","/*\n * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n","import { encode } from './../../../../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst canvasVarMap = new Map();\r\nfunction variableListFor(ctx, ctor) {\r\n    let contextMap = canvasVarMap.get(ctx);\r\n    if (!contextMap) {\r\n        contextMap = new Map();\r\n        canvasVarMap.set(ctx, contextMap);\r\n    }\r\n    if (!contextMap.has(ctor)) {\r\n        contextMap.set(ctor, []);\r\n    }\r\n    return contextMap.get(ctor);\r\n}\r\nconst saveWebGLVar = (value, win, ctx) => {\r\n    if (!value ||\r\n        !(isInstanceOfWebGLObject(value, win) || typeof value === 'object'))\r\n        return;\r\n    const name = value.constructor.name;\r\n    const list = variableListFor(ctx, name);\r\n    let index = list.indexOf(value);\r\n    if (index === -1) {\r\n        index = list.length;\r\n        list.push(value);\r\n    }\r\n    return index;\r\n};\r\nfunction serializeArg(value, win, ctx) {\r\n    if (value instanceof Array) {\r\n        return value.map((arg) => serializeArg(arg, win, ctx));\r\n    }\r\n    else if (value === null) {\r\n        return value;\r\n    }\r\n    else if (value instanceof Float32Array ||\r\n        value instanceof Float64Array ||\r\n        value instanceof Int32Array ||\r\n        value instanceof Uint32Array ||\r\n        value instanceof Uint8Array ||\r\n        value instanceof Uint16Array ||\r\n        value instanceof Int16Array ||\r\n        value instanceof Int8Array ||\r\n        value instanceof Uint8ClampedArray) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [Object.values(value)],\r\n        };\r\n    }\r\n    else if (value instanceof ArrayBuffer) {\r\n        const name = value.constructor.name;\r\n        const base64 = encode(value);\r\n        return {\r\n            rr_type: name,\r\n            base64,\r\n        };\r\n    }\r\n    else if (value instanceof DataView) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [\r\n                serializeArg(value.buffer, win, ctx),\r\n                value.byteOffset,\r\n                value.byteLength,\r\n            ],\r\n        };\r\n    }\r\n    else if (value instanceof HTMLImageElement) {\r\n        const name = value.constructor.name;\r\n        const { src } = value;\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof HTMLCanvasElement) {\r\n        const name = 'HTMLImageElement';\r\n        const src = value.toDataURL();\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof ImageData) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [serializeArg(value.data, win, ctx), value.width, value.height],\r\n        };\r\n    }\r\n    else if (isInstanceOfWebGLObject(value, win) || typeof value === 'object') {\r\n        const name = value.constructor.name;\r\n        const index = saveWebGLVar(value, win, ctx);\r\n        return {\r\n            rr_type: name,\r\n            index: index,\r\n        };\r\n    }\r\n    return value;\r\n}\r\nconst serializeArgs = (args, win, ctx) => {\r\n    return [...args].map((arg) => serializeArg(arg, win, ctx));\r\n};\r\nconst isInstanceOfWebGLObject = (value, win) => {\r\n    const webGLConstructorNames = [\r\n        'WebGLActiveInfo',\r\n        'WebGLBuffer',\r\n        'WebGLFramebuffer',\r\n        'WebGLProgram',\r\n        'WebGLRenderbuffer',\r\n        'WebGLShader',\r\n        'WebGLShaderPrecisionFormat',\r\n        'WebGLTexture',\r\n        'WebGLUniformLocation',\r\n        'WebGLVertexArrayObject',\r\n        'WebGLVertexArrayObjectOES',\r\n    ];\r\n    const supportedWebGLConstructorNames = webGLConstructorNames.filter((name) => typeof win[name] === 'function');\r\n    return Boolean(supportedWebGLConstructorNames.find((name) => value instanceof win[name]));\r\n};\n\nexport { isInstanceOfWebGLObject, saveWebGLVar, serializeArg, serializeArgs, variableListFor };\n","import { patch, isBlocked } from '../../../utils.js';\n\nfunction initCanvasContextObserver(win, blockClass, blockSelector) {\r\n    const handlers = [];\r\n    try {\r\n        const restoreHandler = patch(win.HTMLCanvasElement.prototype, 'getContext', function (original) {\r\n            return function (contextType, ...args) {\r\n                if (!isBlocked(this, blockClass, blockSelector, true)) {\r\n                    if (!('__context' in this))\r\n                        this.__context = contextType;\r\n                }\r\n                return original.apply(this, [contextType, ...args]);\r\n            };\r\n        });\r\n        handlers.push(restoreHandler);\r\n    }\r\n    catch (_a) {\r\n        console.error('failed to patch HTMLCanvasElement.prototype.getContext');\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasContextObserver as default };\n","import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { saveWebGLVar, serializeArgs } from './serialize-args.js';\n\nfunction patchGLPrototype(prototype, type, cb, blockClass, blockSelector, mirror, win) {\r\n    const handlers = [];\r\n    const props = Object.getOwnPropertyNames(prototype);\r\n    for (const prop of props) {\r\n        if ([\r\n            'isContextLost',\r\n            'canvas',\r\n            'drawingBufferWidth',\r\n            'drawingBufferHeight',\r\n        ].includes(prop)) {\r\n            continue;\r\n        }\r\n        try {\r\n            if (typeof prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    const result = original.apply(this, args);\r\n                    saveWebGLVar(result, win, this);\r\n                    if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        const recordArgs = serializeArgs([...args], win, this);\r\n                        const mutation = {\r\n                            type,\r\n                            property: prop,\r\n                            args: recordArgs,\r\n                        };\r\n                        cb(this.canvas, mutation);\r\n                    }\r\n                    return result;\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type,\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return handlers;\r\n}\r\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, blockSelector, mirror) {\r\n    const handlers = [];\r\n    handlers.push(...patchGLPrototype(win.WebGLRenderingContext.prototype, CanvasContext.WebGL, cb, blockClass, blockSelector, mirror, win));\r\n    if (typeof win.WebGL2RenderingContext !== 'undefined') {\r\n        handlers.push(...patchGLPrototype(win.WebGL2RenderingContext.prototype, CanvasContext.WebGL2, cb, blockClass, blockSelector, mirror, win));\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasWebGLMutationObserver as default };\n","var WorkerClass = null;\n\ntry {\n    var WorkerThreads =\n        typeof module !== 'undefined' && typeof module.require === 'function' && module.require('worker_threads') ||\n        typeof __non_webpack_require__ === 'function' && __non_webpack_require__('worker_threads') ||\n        typeof require === 'function' && require('worker_threads');\n    WorkerClass = WorkerThreads.Worker;\n} catch(e) {} // eslint-disable-line\n\nexport { WorkerClass };\n","import { WorkerClass } from './_rollup-plugin-web-worker-loader__helper__node__WorkerClass.js';\n\nfunction decodeBase64(base64, enableUnicode) {\n    return Buffer.from(base64, 'base64').toString(enableUnicode ? 'utf16' : 'utf8');\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    return function WorkerFactory(options) {\n        return new WorkerClass(body, Object.assign({}, options, { eval: true }));\n    };\n}\n\nexport { createBase64WorkerFactory };\n","function decodeBase64(base64, enableUnicode) {\n    var binaryString = atob(base64);\n    if (enableUnicode) {\n        var binaryView = new Uint8Array(binaryString.length);\n        for (var i = 0, n = binaryString.length; i < n; ++i) {\n            binaryView[i] = binaryString.charCodeAt(i);\n        }\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    var blob = new Blob([body], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n        return new Worker(url, options);\n    };\n}\n\nexport { createBase64WorkerFactory };\n","var kIsNodeJS = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n\nfunction isNodeJS() {\n    return kIsNodeJS;\n}\n\nexport { isNodeJS };\n","import { createBase64WorkerFactory } from './_rollup-plugin-web-worker-loader__helper__auto__createBase64WorkerFactory.js';\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=', null, false);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n","import { createBase64WorkerFactory as createBase64WorkerFactory$1 } from './_rollup-plugin-web-worker-loader__helper__node__createBase64WorkerFactory.js';\nimport { createBase64WorkerFactory as createBase64WorkerFactory$2 } from './_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js';\nimport { isNodeJS } from './_rollup-plugin-web-worker-loader__helper__auto__isNodeJS.js';\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    if (isNodeJS()) {\n        return createBase64WorkerFactory$1(base64, sourcemapArg, enableUnicodeArg);\n    }\n    return createBase64WorkerFactory$2(base64, sourcemapArg, enableUnicodeArg);\n}\n\nexport { createBase64WorkerFactory };\n","import { __rest, __awaiter } from './../../../../../../ext/tslib/tslib.es6.js';\nimport { isBlocked } from '../../../utils.js';\nimport { CanvasContext } from '../../../../../types/dist/types.js';\nimport initCanvas2DMutationObserver from './2d.js';\nimport initCanvasContextObserver from './canvas.js';\nimport initCanvasWebGLMutationObserver from './webgl.js';\nimport WorkerFactory from '../../../../../../_virtual/image-bitmap-data-url-worker.js';\n\nclass CanvasManager {\r\n    constructor(options) {\r\n        this.pendingCanvasMutations = new Map();\r\n        this.rafStamps = { latestId: 0, invokeId: null };\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.processMutation = (target, mutation) => {\r\n            const newFrame = this.rafStamps.invokeId &&\r\n                this.rafStamps.latestId !== this.rafStamps.invokeId;\r\n            if (newFrame || !this.rafStamps.invokeId)\r\n                this.rafStamps.invokeId = this.rafStamps.latestId;\r\n            if (!this.pendingCanvasMutations.has(target)) {\r\n                this.pendingCanvasMutations.set(target, []);\r\n            }\r\n            this.pendingCanvasMutations.get(target).push(mutation);\r\n        };\r\n        const { sampling = 'all', win, blockClass, blockSelector, recordCanvas, dataURLOptions, } = options;\r\n        this.mutationCb = options.mutationCb;\r\n        this.mirror = options.mirror;\r\n        if (recordCanvas && sampling === 'all')\r\n            this.initCanvasMutationObserver(win, blockClass, blockSelector);\r\n        if (recordCanvas && typeof sampling === 'number')\r\n            this.initCanvasFPSObserver(sampling, win, blockClass, blockSelector, {\r\n                dataURLOptions,\r\n            });\r\n    }\r\n    reset() {\r\n        this.pendingCanvasMutations.clear();\r\n        this.resetObservers && this.resetObservers();\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n    }\r\n    initCanvasFPSObserver(fps, win, blockClass, blockSelector, options) {\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector);\r\n        const snapshotInProgressMap = new Map();\r\n        const worker = new WorkerFactory();\r\n        worker.onmessage = (e) => {\r\n            const { id } = e.data;\r\n            snapshotInProgressMap.set(id, false);\r\n            if (!('base64' in e.data))\r\n                return;\r\n            const { base64, type, width, height } = e.data;\r\n            this.mutationCb({\r\n                id,\r\n                type: CanvasContext['2D'],\r\n                commands: [\r\n                    {\r\n                        property: 'clearRect',\r\n                        args: [0, 0, width, height],\r\n                    },\r\n                    {\r\n                        property: 'drawImage',\r\n                        args: [\r\n                            {\r\n                                rr_type: 'ImageBitmap',\r\n                                args: [\r\n                                    {\r\n                                        rr_type: 'Blob',\r\n                                        data: [{ rr_type: 'ArrayBuffer', base64 }],\r\n                                        type,\r\n                                    },\r\n                                ],\r\n                            },\r\n                            0,\r\n                            0,\r\n                        ],\r\n                    },\r\n                ],\r\n            });\r\n        };\r\n        const timeBetweenSnapshots = 1000 / fps;\r\n        let lastSnapshotTime = 0;\r\n        let rafId;\r\n        const getCanvas = () => {\r\n            const matchedCanvas = [];\r\n            win.document.querySelectorAll('canvas').forEach((canvas) => {\r\n                if (!isBlocked(canvas, blockClass, blockSelector, true)) {\r\n                    matchedCanvas.push(canvas);\r\n                }\r\n            });\r\n            return matchedCanvas;\r\n        };\r\n        const takeCanvasSnapshots = (timestamp) => {\r\n            if (lastSnapshotTime &&\r\n                timestamp - lastSnapshotTime < timeBetweenSnapshots) {\r\n                rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n                return;\r\n            }\r\n            lastSnapshotTime = timestamp;\r\n            getCanvas()\r\n                .forEach((canvas) => __awaiter(this, void 0, void 0, function* () {\r\n                var _a;\r\n                const id = this.mirror.getId(canvas);\r\n                if (snapshotInProgressMap.get(id))\r\n                    return;\r\n                snapshotInProgressMap.set(id, true);\r\n                if (['webgl', 'webgl2'].includes(canvas.__context)) {\r\n                    const context = canvas.getContext(canvas.__context);\r\n                    if (((_a = context === null || context === void 0 ? void 0 : context.getContextAttributes()) === null || _a === void 0 ? void 0 : _a.preserveDrawingBuffer) === false) {\r\n                        context === null || context === void 0 ? void 0 : context.clear(context.COLOR_BUFFER_BIT);\r\n                    }\r\n                }\r\n                const bitmap = yield createImageBitmap(canvas);\r\n                worker.postMessage({\r\n                    id,\r\n                    bitmap,\r\n                    width: canvas.width,\r\n                    height: canvas.height,\r\n                    dataURLOptions: options.dataURLOptions,\r\n                }, [bitmap]);\r\n            }));\r\n            rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        };\r\n        rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            cancelAnimationFrame(rafId);\r\n        };\r\n    }\r\n    initCanvasMutationObserver(win, blockClass, blockSelector) {\r\n        this.startRAFTimestamping();\r\n        this.startPendingCanvasMutationFlusher();\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector);\r\n        const canvas2DReset = initCanvas2DMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector);\r\n        const canvasWebGL1and2Reset = initCanvasWebGLMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector, this.mirror);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            canvas2DReset();\r\n            canvasWebGL1and2Reset();\r\n        };\r\n    }\r\n    startPendingCanvasMutationFlusher() {\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    startRAFTimestamping() {\r\n        const setLatestRAFTimestamp = (timestamp) => {\r\n            this.rafStamps.latestId = timestamp;\r\n            requestAnimationFrame(setLatestRAFTimestamp);\r\n        };\r\n        requestAnimationFrame(setLatestRAFTimestamp);\r\n    }\r\n    flushPendingCanvasMutations() {\r\n        this.pendingCanvasMutations.forEach((values, canvas) => {\r\n            const id = this.mirror.getId(canvas);\r\n            this.flushPendingCanvasMutationFor(canvas, id);\r\n        });\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    flushPendingCanvasMutationFor(canvas, id) {\r\n        if (this.frozen || this.locked) {\r\n            return;\r\n        }\r\n        const valuesWithType = this.pendingCanvasMutations.get(canvas);\r\n        if (!valuesWithType || id === -1)\r\n            return;\r\n        const values = valuesWithType.map((value) => {\r\n            const rest = __rest(value, [\"type\"]);\r\n            return rest;\r\n        });\r\n        const { type } = valuesWithType[0];\r\n        this.mutationCb({ id, type, commands: values });\r\n        this.pendingCanvasMutations.delete(canvas);\r\n    }\r\n}\n\nexport { CanvasManager };\n","import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { serializeArgs } from './serialize-args.js';\n\nfunction initCanvas2DMutationObserver(cb, win, blockClass, blockSelector) {\r\n    const handlers = [];\r\n    const props2D = Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);\r\n    for (const prop of props2D) {\r\n        try {\r\n            if (typeof win.CanvasRenderingContext2D.prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(win.CanvasRenderingContext2D.prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        setTimeout(() => {\r\n                            const recordArgs = serializeArgs([...args], win, this);\r\n                            cb(this.canvas, {\r\n                                type: CanvasContext['2D'],\r\n                                property: prop,\r\n                                args: recordArgs,\r\n                            });\r\n                        }, 0);\r\n                    }\r\n                    return original.apply(this, args);\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(win.CanvasRenderingContext2D.prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type: CanvasContext['2D'],\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvas2DMutationObserver as default };\n","import { getCssRuleString } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { StyleSheetMirror } from '../utils.js';\n\nclass StylesheetManager {\r\n    constructor(options) {\r\n        this.trackedLinkElements = new WeakSet();\r\n        this.styleMirror = new StyleSheetMirror();\r\n        this.mutationCb = options.mutationCb;\r\n        this.adoptedStyleSheetCb = options.adoptedStyleSheetCb;\r\n    }\r\n    attachLinkElement(linkEl, childSn) {\r\n        if ('_cssText' in childSn.attributes)\r\n            this.mutationCb({\r\n                adds: [],\r\n                removes: [],\r\n                texts: [],\r\n                attributes: [\r\n                    {\r\n                        id: childSn.id,\r\n                        attributes: childSn\r\n                            .attributes,\r\n                    },\r\n                ],\r\n            });\r\n        this.trackLinkElement(linkEl);\r\n    }\r\n    trackLinkElement(linkEl) {\r\n        if (this.trackedLinkElements.has(linkEl))\r\n            return;\r\n        this.trackedLinkElements.add(linkEl);\r\n        this.trackStylesheetInLinkElement(linkEl);\r\n    }\r\n    adoptStyleSheets(sheets, hostId) {\r\n        if (sheets.length === 0)\r\n            return;\r\n        const adoptedStyleSheetData = {\r\n            id: hostId,\r\n            styleIds: [],\r\n        };\r\n        const styles = [];\r\n        for (const sheet of sheets) {\r\n            let styleId;\r\n            if (!this.styleMirror.has(sheet)) {\r\n                styleId = this.styleMirror.add(sheet);\r\n                const rules = Array.from(sheet.rules || CSSRule);\r\n                styles.push({\r\n                    styleId,\r\n                    rules: rules.map((r, index) => {\r\n                        return {\r\n                            rule: getCssRuleString(r),\r\n                            index,\r\n                        };\r\n                    }),\r\n                });\r\n            }\r\n            else\r\n                styleId = this.styleMirror.getId(sheet);\r\n            adoptedStyleSheetData.styleIds.push(styleId);\r\n        }\r\n        if (styles.length > 0)\r\n            adoptedStyleSheetData.styles = styles;\r\n        this.adoptedStyleSheetCb(adoptedStyleSheetData);\r\n    }\r\n    reset() {\r\n        this.styleMirror.reset();\r\n        this.trackedLinkElements = new WeakSet();\r\n    }\r\n    trackStylesheetInLinkElement(linkEl) {\r\n    }\r\n}\n\nexport { StylesheetManager };\n","import { createMirror, snapshot } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { initObservers, mutationBuffers } from './observer.js';\nimport { polyfill, on, getWindowWidth, getWindowHeight, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\nimport { IframeManager } from './iframe-manager.js';\nimport { ShadowDomManager } from './shadow-dom-manager.js';\nimport { CanvasManager } from './observers/canvas/canvas-manager.js';\nimport { StylesheetManager } from './stylesheet-manager.js';\n\nfunction wrapEvent(e) {\r\n    return Object.assign(Object.assign({}, e), { timestamp: Date.now() });\r\n}\r\nlet wrappedEmit;\r\nlet takeFullSnapshot;\r\nlet canvasManager;\r\nlet recording = false;\r\nconst mirror = createMirror();\r\nfunction record(options = {}) {\r\n    const { emit, checkoutEveryNms, checkoutEveryNth, blockClass = 'rr-block', blockSelector = null, ignoreClass = 'rr-ignore', maskTextClass = 'rr-mask', maskTextSelector = null, inlineStylesheet = true, maskAllInputs, maskInputOptions: _maskInputOptions, slimDOMOptions: _slimDOMOptions, maskInputFn, maskTextFn, hooks, packFn, sampling = {}, dataURLOptions = {}, mousemoveWait, recordCanvas = false, recordCrossOriginIframes = false, userTriggeredOnInput = false, collectFonts = false, inlineImages = false, plugins, keepIframeSrcFn = () => false, ignoreCSSAttributes = new Set([]), } = options;\r\n    const inEmittingFrame = recordCrossOriginIframes\r\n        ? window.parent === window\r\n        : true;\r\n    let passEmitsToParent = false;\r\n    if (!inEmittingFrame) {\r\n        try {\r\n            window.parent.document;\r\n            passEmitsToParent = false;\r\n        }\r\n        catch (e) {\r\n            passEmitsToParent = true;\r\n        }\r\n    }\r\n    if (inEmittingFrame && !emit) {\r\n        throw new Error('emit function is required');\r\n    }\r\n    if (mousemoveWait !== undefined && sampling.mousemove === undefined) {\r\n        sampling.mousemove = mousemoveWait;\r\n    }\r\n    mirror.reset();\r\n    const maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true,\r\n        }\r\n        : _maskInputOptions !== undefined\r\n            ? _maskInputOptions\r\n            : { password: true };\r\n    const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === 'all'\r\n        ? {\r\n            script: true,\r\n            comment: true,\r\n            headFavicon: true,\r\n            headWhitespace: true,\r\n            headMetaSocial: true,\r\n            headMetaRobots: true,\r\n            headMetaHttpEquiv: true,\r\n            headMetaVerification: true,\r\n            headMetaAuthorship: _slimDOMOptions === 'all',\r\n            headMetaDescKeywords: _slimDOMOptions === 'all',\r\n        }\r\n        : _slimDOMOptions\r\n            ? _slimDOMOptions\r\n            : {};\r\n    polyfill();\r\n    let lastFullSnapshotEvent;\r\n    let incrementalSnapshotCount = 0;\r\n    const eventProcessor = (e) => {\r\n        for (const plugin of plugins || []) {\r\n            if (plugin.eventProcessor) {\r\n                e = plugin.eventProcessor(e);\r\n            }\r\n        }\r\n        if (packFn) {\r\n            e = packFn(e);\r\n        }\r\n        return e;\r\n    };\r\n    wrappedEmit = (e, isCheckout) => {\r\n        var _a;\r\n        if (((_a = mutationBuffers[0]) === null || _a === void 0 ? void 0 : _a.isFrozen()) &&\r\n            e.type !== EventType.FullSnapshot &&\r\n            !(e.type === EventType.IncrementalSnapshot &&\r\n                e.data.source === IncrementalSource.Mutation)) {\r\n            mutationBuffers.forEach((buf) => buf.unfreeze());\r\n        }\r\n        if (inEmittingFrame) {\r\n            emit === null || emit === void 0 ? void 0 : emit(eventProcessor(e), isCheckout);\r\n        }\r\n        else if (passEmitsToParent) {\r\n            const message = {\r\n                type: 'rrweb',\r\n                event: eventProcessor(e),\r\n                isCheckout,\r\n            };\r\n            window.parent.postMessage(message, '*');\r\n        }\r\n        if (e.type === EventType.FullSnapshot) {\r\n            lastFullSnapshotEvent = e;\r\n            incrementalSnapshotCount = 0;\r\n        }\r\n        else if (e.type === EventType.IncrementalSnapshot) {\r\n            if (e.data.source === IncrementalSource.Mutation &&\r\n                e.data.isAttachIframe) {\r\n                return;\r\n            }\r\n            incrementalSnapshotCount++;\r\n            const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\r\n            const exceedTime = checkoutEveryNms &&\r\n                e.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\r\n            if (exceedCount || exceedTime) {\r\n                takeFullSnapshot(true);\r\n            }\r\n        }\r\n    };\r\n    const wrappedMutationEmit = (m) => {\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.IncrementalSnapshot,\r\n            data: Object.assign({ source: IncrementalSource.Mutation }, m),\r\n        }));\r\n    };\r\n    const wrappedScrollEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.Scroll }, p),\r\n    }));\r\n    const wrappedCanvasMutationEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.CanvasMutation }, p),\r\n    }));\r\n    const wrappedAdoptedStyleSheetEmit = (a) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.AdoptedStyleSheet }, a),\r\n    }));\r\n    const stylesheetManager = new StylesheetManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit,\r\n    });\r\n    const iframeManager = new IframeManager({\r\n        mirror,\r\n        mutationCb: wrappedMutationEmit,\r\n        stylesheetManager: stylesheetManager,\r\n        recordCrossOriginIframes,\r\n        wrappedEmit,\r\n    });\r\n    for (const plugin of plugins || []) {\r\n        if (plugin.getMirror)\r\n            plugin.getMirror({\r\n                nodeMirror: mirror,\r\n                crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,\r\n                crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror,\r\n            });\r\n    }\r\n    canvasManager = new CanvasManager({\r\n        recordCanvas,\r\n        mutationCb: wrappedCanvasMutationEmit,\r\n        win: window,\r\n        blockClass,\r\n        blockSelector,\r\n        mirror,\r\n        sampling: sampling.canvas,\r\n        dataURLOptions,\r\n    });\r\n    const shadowDomManager = new ShadowDomManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        scrollCb: wrappedScrollEmit,\r\n        bypassOptions: {\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskInputOptions,\r\n            dataURLOptions,\r\n            maskTextFn,\r\n            maskInputFn,\r\n            recordCanvas,\r\n            inlineImages,\r\n            sampling,\r\n            slimDOMOptions,\r\n            iframeManager,\r\n            stylesheetManager,\r\n            canvasManager,\r\n            keepIframeSrcFn,\r\n        },\r\n        mirror,\r\n    });\r\n    takeFullSnapshot = (isCheckout = false) => {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.Meta,\r\n            data: {\r\n                href: window.location.href,\r\n                width: getWindowWidth(),\r\n                height: getWindowHeight(),\r\n            },\r\n        }), isCheckout);\r\n        stylesheetManager.reset();\r\n        mutationBuffers.forEach((buf) => buf.lock());\r\n        const node = snapshot(document, {\r\n            mirror,\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskAllInputs: maskInputOptions,\r\n            maskTextFn,\r\n            slimDOM: slimDOMOptions,\r\n            dataURLOptions,\r\n            recordCanvas,\r\n            inlineImages,\r\n            onSerialize: (n) => {\r\n                if (isSerializedIframe(n, mirror)) {\r\n                    iframeManager.addIframe(n);\r\n                }\r\n                if (isSerializedStylesheet(n, mirror)) {\r\n                    stylesheetManager.trackLinkElement(n);\r\n                }\r\n                if (hasShadowRoot(n)) {\r\n                    shadowDomManager.addShadowRoot(n.shadowRoot, document);\r\n                }\r\n            },\r\n            onIframeLoad: (iframe, childSn) => {\r\n                iframeManager.attachIframe(iframe, childSn);\r\n                shadowDomManager.observeAttachShadow(iframe);\r\n            },\r\n            onStylesheetLoad: (linkEl, childSn) => {\r\n                stylesheetManager.attachLinkElement(linkEl, childSn);\r\n            },\r\n            keepIframeSrcFn,\r\n        });\r\n        if (!node) {\r\n            return console.warn('Failed to snapshot the document');\r\n        }\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.FullSnapshot,\r\n            data: {\r\n                node,\r\n                initialOffset: {\r\n                    left: window.pageXOffset !== undefined\r\n                        ? window.pageXOffset\r\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollLeft) ||\r\n                            ((_b = (_a = document === null || document === void 0 ? void 0 : document.body) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.scrollLeft) ||\r\n                            ((_c = document === null || document === void 0 ? void 0 : document.body) === null || _c === void 0 ? void 0 : _c.scrollLeft) ||\r\n                            0,\r\n                    top: window.pageYOffset !== undefined\r\n                        ? window.pageYOffset\r\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollTop) ||\r\n                            ((_e = (_d = document === null || document === void 0 ? void 0 : document.body) === null || _d === void 0 ? void 0 : _d.parentElement) === null || _e === void 0 ? void 0 : _e.scrollTop) ||\r\n                            ((_f = document === null || document === void 0 ? void 0 : document.body) === null || _f === void 0 ? void 0 : _f.scrollTop) ||\r\n                            0,\r\n                },\r\n            },\r\n        }));\r\n        mutationBuffers.forEach((buf) => buf.unlock());\r\n        if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0)\r\n            stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets, mirror.getId(document));\r\n    };\r\n    try {\r\n        const handlers = [];\r\n        handlers.push(on('DOMContentLoaded', () => {\r\n            wrappedEmit(wrapEvent({\r\n                type: EventType.DomContentLoaded,\r\n                data: {},\r\n            }));\r\n        }));\r\n        const observe = (doc) => {\r\n            var _a;\r\n            return initObservers({\r\n                mutationCb: wrappedMutationEmit,\r\n                mousemoveCb: (positions, source) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source,\r\n                        positions,\r\n                    },\r\n                })),\r\n                mouseInteractionCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MouseInteraction }, d),\r\n                })),\r\n                scrollCb: wrappedScrollEmit,\r\n                viewportResizeCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.ViewportResize }, d),\r\n                })),\r\n                inputCb: (v) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Input }, v),\r\n                })),\r\n                mediaInteractionCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MediaInteraction }, p),\r\n                })),\r\n                styleSheetRuleCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleSheetRule }, r),\r\n                })),\r\n                styleDeclarationCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleDeclaration }, r),\r\n                })),\r\n                canvasMutationCb: wrappedCanvasMutationEmit,\r\n                fontCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Font }, p),\r\n                })),\r\n                selectionCb: (p) => {\r\n                    wrappedEmit(wrapEvent({\r\n                        type: EventType.IncrementalSnapshot,\r\n                        data: Object.assign({ source: IncrementalSource.Selection }, p),\r\n                    }));\r\n                },\r\n                blockClass,\r\n                ignoreClass,\r\n                maskTextClass,\r\n                maskTextSelector,\r\n                maskInputOptions,\r\n                inlineStylesheet,\r\n                sampling,\r\n                recordCanvas,\r\n                inlineImages,\r\n                userTriggeredOnInput,\r\n                collectFonts,\r\n                doc,\r\n                maskInputFn,\r\n                maskTextFn,\r\n                keepIframeSrcFn,\r\n                blockSelector,\r\n                slimDOMOptions,\r\n                dataURLOptions,\r\n                mirror,\r\n                iframeManager,\r\n                stylesheetManager,\r\n                shadowDomManager,\r\n                canvasManager,\r\n                ignoreCSSAttributes,\r\n                plugins: ((_a = plugins === null || plugins === void 0 ? void 0 : plugins.filter((p) => p.observer)) === null || _a === void 0 ? void 0 : _a.map((p) => ({\r\n                    observer: p.observer,\r\n                    options: p.options,\r\n                    callback: (payload) => wrappedEmit(wrapEvent({\r\n                        type: EventType.Plugin,\r\n                        data: {\r\n                            plugin: p.name,\r\n                            payload,\r\n                        },\r\n                    })),\r\n                }))) || [],\r\n            }, hooks);\r\n        };\r\n        iframeManager.addLoadListener((iframeEl) => {\r\n            handlers.push(observe(iframeEl.contentDocument));\r\n        });\r\n        const init = () => {\r\n            takeFullSnapshot();\r\n            handlers.push(observe(document));\r\n            recording = true;\r\n        };\r\n        if (document.readyState === 'interactive' ||\r\n            document.readyState === 'complete') {\r\n            init();\r\n        }\r\n        else {\r\n            handlers.push(on('load', () => {\r\n                wrappedEmit(wrapEvent({\r\n                    type: EventType.Load,\r\n                    data: {},\r\n                }));\r\n                init();\r\n            }, window));\r\n        }\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n            recording = false;\r\n        };\r\n    }\r\n    catch (error) {\r\n        console.warn(error);\r\n    }\r\n}\r\nrecord.addCustomEvent = (tag, payload) => {\r\n    if (!recording) {\r\n        throw new Error('please add custom event after start recording');\r\n    }\r\n    wrappedEmit(wrapEvent({\r\n        type: EventType.Custom,\r\n        data: {\r\n            tag,\r\n            payload,\r\n        },\r\n    }));\r\n};\r\nrecord.freezePage = () => {\r\n    mutationBuffers.forEach((buf) => buf.freeze());\r\n};\r\nrecord.takeFullSnapshot = (isCheckout) => {\r\n    if (!recording) {\r\n        throw new Error('please take full snapshot after start recording');\r\n    }\r\n    takeFullSnapshot(isCheckout);\r\n};\r\nrecord.mirror = mirror;\n\nexport { record as default };\n",null,null,null],"names":["DeviceCollector","constructor","config","this","collect","type","getDeviceType","vendor","getVendor","model","getModel","os","getOS","screen","getScreenInfo","memory","getMemory","cores","getCores","connection","getConnection","ua","navigator","userAgent","test","includes","undefined","modelMatch","match","name","version","replace","width","window","height","orientation","getOrientation","pixelRatio","devicePixelRatio","innerWidth","innerHeight","deviceMemory","hardwareConcurrency","mozConnection","webkitConnection","effectiveType","downlink","rtt","saveData","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SuppressedError","LocationCollector","geoData","captureLocation","requestGeolocation","Object","assign","url","location","href","hostname","pathname","search","hash","protocol","port","referrer","document","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","geolocation","getCurrentPosition","position","latitude","coords","longitude","reverseGeocode","error","debug","console","log","timeout","maximumAge","response","fetch","headers","ok","data","json","address","country","region","state","city","town","village","BrowserCollector","getBrowserName","getBrowserVersion","engine","getEngine","language","languages","Array","from","cookieEnabled","doNotTrack","getDoNotTrack","viewport","timezoneOffset","Date","getTimezoneOffset","dnt","msDoNotTrack","n","t","i","NodeType","a","o","addEventListener","persisted","timeStamp","c","performance","getEntriesByType","u","activationStart","f","prerendering","wasDiscarded","rating","delta","entries","id","concat","now","Math","floor","random","navigationType","s","PerformanceObserver","supportedEntryTypes","getEntries","observe","buffered","d","r","l","requestAnimationFrame","p","visibilityState","v","m","h","g","T","y","removeEventListener","E","setTimeout","firstHiddenTime","C","L","w","forEach","disconnect","startTime","max","push","reportAllChanges","b","A","passive","capture","I","k","F","entryType","target","cancelable","processingStart","M","D","U","V","X","Y","readyState","Z","responseStart","PerformanceCollector","transport","metrics","start","hadRecentInput","length","takeRecords","onCLS","metric","handleMetric","onFCP","onFID","onLCP","onTTFB","collectNavigationTimings","collectResourceTimings","longTaskThreshold","observeLongTasks","metricName","toLowerCase","sendPerformanceMetric","timestamp","toISOString","timing","navigation","domLoad","domContentLoadedEventEnd","navigationStart","windowLoad","loadEventEnd","details","redirectCount","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","request","requestStart","responseEnd","dom","domComplete","domLoading","resources","resourceStats","total","byType","slowest","resource","initiatorType","map","duration","sort","slice","list","entry","entryTypes","getMetrics","ErrorCollector","breadcrumbs","maxBreadcrumbs","_a","errorOptions","event","handleError","message","filename","lineno","colno","reason","setupAutomaticBreadcrumbs","captureError","context","addBreadcrumb","breadcrumb","crumb","category","level","shift","shouldIgnoreError","errorData","Error","stack","session_id","stackMatch","line","parseInt","column","String","includeLocalVariables","localVariables","sendError","ignorePatterns","ignoreErrors","errorMessage","pattern","RegExp","denyUrls","_b","wrapConsole","tagName","className","innerText","substring","lastHref","checkNavigation","to","originalPushState","history","pushState","args","originalReplaceState","replaceState","original","arg","join","arguments","getBreadcrumbs","NetworkCollector","interceptFetch","interceptXHR","originalFetch","Request","toString","method","clonedResponse","clone","shouldIgnoreUrl","networkRequestOptions","captureFailedOnly","networkRequest","status","size","getResponseSize","failed","captureHeaders","headersToObject","_c","captureBody","text","body","sendNetworkRequest","originalOpen","XMLHttpRequest","prototype","open","originalSend","send","async","username","password","__devskin","call","xhr","devskin","collector","__devskinNetworkCollector","parseResponseHeaders","getAllResponseHeaders","_d","responseText","apiUrl","ignoreUrls","blob","obj","key","headerStr","trim","split","parts","header","HeatmapCollector","clickData","scrollData","mouseMoveData","maxScrollDepth","flushInterval","mouseMoveSampling","heatmapOptions","enabled","trackClicks","trackScroll","trackScrollDepth","trackMouseMovement","setInterval","flush","stop","clearInterval","rect","getBoundingClientRect","relativeX","clientX","left","relativeY","clientY","top","pageX","scrollX","pageY","scrollY","x","element","getElementSelector","elementId","elementClass","pageUrl","viewportWidth","viewportHeight","updateScrollDepth","windowHeight","documentHeight","documentElement","scrollHeight","scrollTop","scrollPercent","round","depth","maxDepth","pageHeight","scrollTimeout","clearTimeout","mouseMoveTimeout","sendHeatmapData","classes","filter","isShadowRoot","host","Boolean","shadowRoot","isNativeShadowDom","getCssRulesString","rules","cssRules","cssText","getCssRuleString","rule","cssStringified","isCSSImportRule","styleSheet","Mirror","idNodeMap","Map","nodeMetaMap","WeakMap","getId","getMeta","getNode","get","getIds","keys","removeNodeFromMap","_this","childNodes","childNode","has","hasNode","node","add","meta","set","oldNode","reset","maskInputValue","maskInputOptions","maskInputFn","repeat","ORIGINAL_ATTRIBUTE_NAME","canvasService","canvasCtx","_id","tagNameRegex","genId","URL_IN_CSS_REF","RELATIVE_PATH","DATA_URI","absoluteToStylesheet","origin","quote1","path1","quote2","path2","path3","filePath","maybeQuote","indexOf","pop","_i","parts_1","part","SRCSET_NOT_SPACES","SRCSET_COMMAS_OR_SPACES","absoluteToDoc","doc","attributeValue","createElement","isSVGElement","el","ownerSVGElement","getHref","transformAttribute","pos","collectCharacters","regEx","chars","exec","output","descriptorsStr","inParens","charAt","getAbsoluteSrcsetString","classMatchesRegex","regex","checkAncestors","nodeType","ELEMENT_NODE","parentNode","eIndex","classList","needMaskingText","maskTextClass","maskTextSelector","parentElement","contains","closest","matches","serializeNode","options","mirror","blockClass","blockSelector","inlineStylesheet","maskTextFn","dataURLOptions","inlineImages","recordCanvas","keepIframeSrcFn","newlyAddedElement","rootId","docId","getRootId","DOCUMENT_NODE","compatMode","Document","DOCUMENT_TYPE_NODE","DocumentType","publicId","systemId","needBlock","_isBlockedElement","HTMLFormElement","processedTagName","getValidTagName","attributes","len","attr","stylesheet","styleSheets","find","rel","_cssText","sheet","textContent","checked","selected","__context","canvas","ctx","getContext","getImageData","originalGetImageData","Uint32Array","min","buffer","some","pixel","is2DCanvasBlank","rr_dataURL","toDataURL","quality","canvasDataURL","blankCanvas","image_1","oldValue_1","crossOrigin","recordInlineImage","naturalWidth","naturalHeight","drawImage","err","warn","currentSrc","removeAttribute","complete","onload","rr_mediaState","paused","rr_mediaCurrentTime","currentTime","scrollLeft","rr_scrollLeft","rr_scrollTop","class","rr_width","rr_height","src","contentDocument","rr_src","Element","isSVG","serializeElementNode","TEXT_NODE","parentTagName","isStyle","isScript","nextSibling","previousSibling","Text","serializeTextNode","CDATA_SECTION_NODE","CDATA","COMMENT_NODE","Comment","lowerIfExists","maybeAttr","serializeNodeWithId","skipChild","slimDOMOptions","_e","_f","onSerialize","onIframeLoad","_g","iframeLoadTimeout","onStylesheetLoad","_h","stylesheetLoadTimeout","_j","_k","_l","preserveWhiteSpace","_serializedNode","sn","comment","script","as","endsWith","headFavicon","headMetaDescKeywords","headMetaSocial","property","headMetaRobots","headMetaHttpEquiv","headMetaAuthorship","headMetaVerification","slimDOMExcluded","serializedNode","recordChild","isShadowHost","headWhitespace","bypassOptions","_m","serializedChildNode","isElement","_o","_p","isShadow","iframeEl","listener","win","contentWindow","fired","blankUrl","timer_1","onceIframeLoaded","iframeDoc","serializedIframeNode","link","styleSheetLoadTimeout","styleSheetLoaded","timer","onceStylesheetLoaded","serializedLinkNode","on","fn","DEPARTED_MIRROR_ACCESS_WARNING","_mirror","throttle","func","wait","previous","leading","remaining","trailing","hookSetter","isRevoked","getOwnPropertyDescriptor","defineProperty","patch","source","replacement","wrapped","defineProperties","__rrweb_original__","enumerable","getWindowHeight","clientHeight","getWindowWidth","clientWidth","isBlocked","isIgnored","isAncestorRemoved","isTouchEvent","changedTouches","isSerializedIframe","nodeName","isSerializedStylesheet","getAttribute","hasShadowRoot","Proxy","Reflect","prop","receiver","StyleSheetMirror","styleIDMap","idStyleMap","newId","getStyle","generateId","EventType","EventType2","IncrementalSource","IncrementalSource2","MouseInteractions","MouseInteractions2","CanvasContext","CanvasContext2","isNodeInLinkedList","DoubleLinkedList","head","current","index","addNode","__ln","removeNode","moveKey","parentId","MutationBuffer","frozen","locked","texts","removes","mapRemoves","movedMap","addedSet","Set","movedSet","droppedSet","processMutations","mutations","processMutation","emit","adds","addList","getNextId","ns","nextId","pushAdd","shadowHost","getRootNode","Node","DOCUMENT_FRAGMENT_NODE","rootShadowHost","notInDoc","currentN","iframeManager","addIframe","stylesheetManager","trackLinkElement","shadowDomManager","addShadowRoot","iframe","childSn","attachIframe","observeAttachShadow","attachLinkElement","values","isParentRemoved","isAncestorInSet","candidate","_node","unhandledNode","payload","attribute","mutationCb","oldValue","attributeName","item","old","setAttribute","style","styleObj","pname","newValue","getPropertyValue","newPriority","getPropertyPriority","addedNodes","genAdds","removedNodes","nodeId","isSerialized","deepDelete","targetId","delete","childN","init","freeze","canvasManager","unfreeze","isFrozen","lock","unlock","addsSet","_isParentRemoved","_isAncestorInSet","mutationBuffers","isCSSGroupingRuleSupported","CSSGroupingRule","isCSSMediaRuleSupported","CSSMediaRule","isCSSSupportsRuleSupported","CSSSupportsRule","isCSSConditionRuleSupported","CSSConditionRule","getEventTarget","path","composedPath","initMutationObserver","rootEl","mutationBuffer","mutationObserverCtor","MutationObserver","__rrMutationObserver","angularZoneSymbol","Zone","__symbol__","observer","bind","attributeOldValue","characterData","characterDataOldValue","childList","subtree","initMouseInteractionObserver","mouseInteractionCb","sampling","mouseInteraction","disableMap","handlers","Number","isNaN","eventKey","eventName","handler","getHandler","initScrollObserver","scrollCb","evt","scrollEl","scrollingElement","scroll","wrapEventWithUserTriggeredFlag","enable","userTriggered","INPUT_TAGS","lastInputValueMap","getNestedCSSRulePositions","childRule","parentRule","unshift","parentStyleSheet","recurse","getIdAndStyleId","styleMirror","styleId","ownerNode","initAdoptedStyleSheetObserver","hostId","patchTarget","defaultView","ownerDocument","ShadowRoot","originalPropertyDescriptor","configurable","sheets","adoptStyleSheets","initObservers","hooks","currentWindow","mousemoveCb","viewportResizeCb","inputCb","mediaInteractionCb","styleSheetRuleCb","styleDeclarationCb","canvasMutationCb","fontCb","selectionCb","mutation","mousemove","viewportResize","input","mediaInteaction","styleSheetRule","styleDeclaration","canvasMutation","font","selection","mergeHooks","mutationObserver","mousemoveHandler","threshold","callbackThreshold","mousemoveCallback","timeBaseline","positions","wrappedCb","totalOffset","timeOffset","updatePosition","DragEvent","Drag","MouseEvent","MouseMove","TouchMove","initMoveObserver","mouseInteractionHandler","scrollHandler","viewportResizeHandler","lastH","lastW","initViewportResizeObserver","inputHandler","ignoreClass","userTriggeredOnInput","eventHandler","isTrusted","isChecked","cbWithDedup","querySelectorAll","lastInputValue","propertyDescriptor","HTMLInputElement","hookProperties","HTMLSelectElement","HTMLTextAreaElement","HTMLOptionElement","initInputObserver","mediaInteractionHandler","volume","muted","playbackRate","media","initMediaInteractionObserver","styleSheetObserver","insertRule","CSSStyleSheet","deleteRule","replaceSync","supportedNestedCSSRuleTypes","unmodifiedFunctions","typeKey","initStyleSheetObserver","adoptedStyleSheetObserver","styleDeclarationObserver","ignoreCSSAttributes","setProperty","CSSStyleDeclaration","priority","removeProperty","remove","initStyleDeclarationObserver","fontObserver","collectFonts","fontMap","originalFontFace","FontFace","family","descriptors","fontFace","fontSource","JSON","stringify","Uint8Array","restoreHandler","fonts","initFontObserver","selectionObserver","param","collapsed","updateSelection","getSelection","isCollapsed","ranges","count","rangeCount","range","getRangeAt","startContainer","startOffset","endContainer","endOffset","end","initSelectionObserver","pluginHandlers","plugin","plugins","callback","CrossOriginIframeMirror","generateIdFn","iframeIdToRemoteIdMap","iframeRemoteIdToIdMap","remoteId","idToRemoteMap","remoteToIdMap","idToRemoteIdMap","getIdToRemoteIdMap","remoteIdToIdMap","getRemoteIdToIdMap","getRemoteId","getRemoteIds","ids","IframeManager","iframes","crossOriginIframeMap","crossOriginIframeMirror","wrappedEmit","recordCrossOriginIframes","crossOriginIframeStyleMirror","handleMessage","addLoadListener","cb","loadListener","isAttachIframe","adoptedStyleSheets","transformedEvent","transformCrossOriginEvent","isCheckout","FullSnapshot","replaceIdOnNode","IncrementalSnapshot","Mutation","Meta","Load","DomContentLoaded","Plugin","Custom","replaceIds","ViewportResize","MediaInteraction","MouseInteraction","Scroll","CanvasMutation","Input","StyleSheetRule","StyleDeclaration","replaceStyleIds","Font","Selection","AdoptedStyleSheet","styles","iframeMirror","isArray","child","ShadowDomManager","shadowDoms","WeakSet","restorePatches","manager","option","iframeElement","HTMLElement","restorePatch","lookup","charCodeAt","canvasVarMap","saveWebGLVar","isInstanceOfWebGLObject","ctor","contextMap","variableListFor","serializeArg","Float32Array","Float64Array","Int32Array","Uint16Array","Int16Array","Int8Array","Uint8ClampedArray","rr_type","ArrayBuffer","base64","arraybuffer","bytes","encode","DataView","byteOffset","byteLength","HTMLImageElement","HTMLCanvasElement","ImageData","serializeArgs","supportedWebGLConstructorNames","initCanvasContextObserver","contextType","patchGLPrototype","props","getOwnPropertyNames","recordArgs","hookHandler","setter","WorkerClass","WorkerThreads","module","require","__non_webpack_require__","Worker","createBase64WorkerFactory","sourcemapArg","enableUnicodeArg","Buffer","decodeBase64","eval","createURL","atob","Blob","URL","createObjectURL","kIsNodeJS","process","WorkerFactory","createBase64WorkerFactory$1","createBase64WorkerFactory$2","CanvasManager","pendingCanvasMutations","rafStamps","latestId","invokeId","initCanvasMutationObserver","initCanvasFPSObserver","clear","resetObservers","fps","canvasContextReset","snapshotInProgressMap","worker","onmessage","commands","timeBetweenSnapshots","rafId","lastSnapshotTime","takeCanvasSnapshots","matchedCanvas","getCanvas","getContextAttributes","preserveDrawingBuffer","COLOR_BUFFER_BIT","bitmap","createImageBitmap","postMessage","cancelAnimationFrame","startRAFTimestamping","startPendingCanvasMutationFlusher","canvas2DReset","props2D","CanvasRenderingContext2D","initCanvas2DMutationObserver","canvasWebGL1and2Reset","WebGLRenderingContext","WebGL","WebGL2RenderingContext","WebGL2","initCanvasWebGLMutationObserver","flushPendingCanvasMutations","setLatestRAFTimestamp","flushPendingCanvasMutationFor","valuesWithType","rest","hasOwnProperty","getOwnPropertySymbols","propertyIsEnumerable","__rest","StylesheetManager","trackedLinkElements","adoptedStyleSheetCb","linkEl","trackStylesheetInLinkElement","adoptedStyleSheetData","styleIds","CSSRule","wrapEvent","takeFullSnapshot","recording","record","checkoutEveryNms","checkoutEveryNth","maskAllInputs","_maskInputOptions","_slimDOMOptions","packFn","mousemoveWait","inEmittingFrame","parent","passEmitsToParent","color","date","email","month","number","tel","time","week","textarea","select","lastFullSnapshotEvent","NodeList","DOMTokenList","TypeError","polyfill","incrementalSnapshotCount","eventProcessor","buf","exceedCount","exceedTime","wrappedMutationEmit","wrappedScrollEmit","wrappedCanvasMutationEmit","getMirror","nodeMirror","slimDOM","snapshot","initialOffset","pageXOffset","pageYOffset","addCustomEvent","tag","freezePage","RRWebRecorder","sessionId","onEventsReady","stopFn","events","sampleRate","eventsToSend","getEventCount","isRecording","Transport","queue","maxQueueSize","flushIntervalMs","startPeriodicFlush","hidden","sendEvent","enqueue","identifyUser","user","sendToBackend","startSession","session","sendRecordingEvents","heatmapData","useBeacon","items","grouped","endpoint","getEndpointForType","endpoint_1","data_1","apiKey","appId","environment","release","beforeSend","sendBeacon","Authorization","keepalive","statusText","destroy","DevSkin","userId","anonymousId","initialized","deviceCollector","locationCollector","browserCollector","performanceCollector","errorCollector","networkCollector","heatmapCollector","rrwebRecorder","captureWebVitals","captureNetworkRequests","captureErrors","captureUserAgent","captureDevice","getOrCreateAnonymousId","sessionRecording","trackPageView","setupVisibilityTracking","setupUnloadTracking","track","properties","eventData","event_name","event_type","user_id","anonymous_id","getContextData","page_url","page_title","title","identify","traits","userData","startRecording","stopRecording","optOut","localStorage","setItem","optIn","removeItem","sessionData","started_at","device","browser","getItem","substr"],"mappings":"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","x_google_ignoreList":[1,4,5,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]}